<!DOCTYPE html>
 HEAD
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- È¢ÑÂä†ËΩΩËµÑÊ∫ê -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://api.open-meteo.com">
    
    <!-- Â≠ó‰ΩìÈ¢ÑÂä†ËΩΩ -->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JPQJRDFL0S"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JPQJRDFL0S');
    </script>

    <!-- International SEO -->
    <title data-i18n="title">Smart Travel Outfit Guide</title>
    <meta name="description" content="Smart travel outfit recommendations based on weather conditions">
    <meta name="keywords" content="travel outfit, weather fashion, travel clothing, smart wardrobe, AI fashion">
    <meta name="author" content="Travel Outfit">
    <meta http-equiv="content-language" content="en">
    
    <!-- Language versions -->
    <link rel="alternate" hreflang="en" href="https://chenrui134.github.io/travel-outfit?lang=en">
    <link rel="alternate" hreflang="zh" href="https://chenrui134.github.io/travel-outfit?lang=zh">
    <link rel="alternate" hreflang="x-default" href="https://chenrui134.github.io/travel-outfit">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Smart Travel Outfit Guide">
    <meta property="og:description" content="AI-powered weather-based fashion recommendations for travelers">
    <meta property="og:image" content="assets/images/banner.webp">
    <meta property="og:image:alt" content="Travel Outfit Guide Banner">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Smart Travel Outfit Guide">
    <meta name="twitter:description" content="AI-powered weather-based fashion recommendations for travelers">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå§Ô∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå§Ô∏è</text></svg>">
    
    <!-- Mobile Optimization -->
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Search Engine Optimization -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://chenrui134.github.io/travel-outfit">
    
    <!-- Ê†∑ÂºèË°® -->
    <link rel="stylesheet" href="styles.min.css">

    <!-- ÂõæÁâáÈ¢ÑÂä†ËΩΩ -->
    <link rel="preload" as="image" href="assets/images/banner.webp" type="image/webp">
    <link rel="preload" as="image" href="assets/images/banner.jpg" type="image/jpeg">
<html lang="zh">
<head>
    <meta charset="UTF-8">
       <!-- Google tag (gtag.js) -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-JPQJRDFL0S"></script>
   <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'G-JPQJRDFL0S');
   </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO‰ºòÂåñ -->
    <title>ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó | Best Weather Dress Guide</title>
    <meta name="description" content="Âü∫‰∫éÂÆûÊó∂Â§©Ê∞îÊï∞ÊçÆÁöÑÊô∫ËÉΩÁ©øË°£Êé®ËçêÔºåÂ∏ÆÂä©ÊÇ®Âú®‰ªª‰ΩïÂ§©Ê∞îÊù°‰ª∂‰∏ãÈÉΩËÉΩÁ©øÊê≠Âæó‰Ωì„ÄÇÊîØÊåÅÂÖ®ÁêÉ‰∏ªË¶ÅÂüéÂ∏ÇÔºåÊèê‰æõÁ≤æÂáÜÁöÑÁ©øË°£Âª∫ËÆÆ„ÄÇ">
    <meta name="keywords" content="Â§©Ê∞îÁ©øË°£ÊåáÂçó,Á©øË°£Êê≠ÈÖç,Â§©Ê∞îÈ¢ÑÊä•,Á©øÊê≠Êé®Ëçê,Weather dress guide,outfit recommendations">
    <meta name="author" content="Travel Outfit">
    <!-- Open Graph Ê†áÁ≠æ -->
    <meta property="og:title" content="ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó | Best Weather Dress Guide">
    <meta property="og:description" content="Âü∫‰∫éÂÆûÊó∂Â§©Ê∞îÊï∞ÊçÆÁöÑÊô∫ËÉΩÁ©øË°£Êé®ËçêÔºåÂ∏ÆÂä©ÊÇ®Âú®‰ªª‰ΩïÂ§©Ê∞îÊù°‰ª∂‰∏ãÈÉΩËÉΩÁ©øÊê≠Âæó‰Ωì„ÄÇ">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chenrui134.github.io/travel-outfit">
    <!-- ÁΩëÁ´ôÂõæÊ†á -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå§Ô∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå§Ô∏è</text></svg>">
    <!-- ÁßªÂä®ËÆæÂ§á‰ºòÂåñ -->
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <!-- ÊêúÁ¥¢ÂºïÊìé‰ºòÂåñ -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://chenrui134.github.io/travel-outfit">
 e2c9aa40afba0c52a546b9926df4f2efd1b2c263
    <style>
        /* Âü∫Á°ÄÊ†∑Âºè */
        body {
            visibility: hidden;
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Icons', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f5f5f7;
            color: #1d1d1f;
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -.022em;
            font-size: 15.75px; /* ÂéüÂßã 15px Â¢ûÂä† 5% */
        }

        /* ÂÆπÂô®Ê†∑ÂºèË∞ÉÊï¥ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;  /* Â¢ûÂä†‰∏ä‰∏ãÂÜÖËæπË∑ù */
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 18px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.04);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ‰ΩçÁΩÆË∞ÉÊï¥ */
        .language-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            margin: 0;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            background: #0071e3;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            font-weight: 500;
            min-width: 100px;
            justify-content: space-between;
        }

        .language-btn:hover {
            background: #0077ed;
        }

        .language-btn::after {
            content: '‚ñº';
            font-size: 10.5px; /* ÂéüÂßã 10px Â¢ûÂä† 5% */
            transition: transform 0.3s ease;
        }

        .language-btn.active::after {
            transform: rotate(180deg);
        }

        .language-list {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: #fff;
            border-radius: 6px;
            padding: 4px;
            display: none;
            z-index: 1000;
            min-width: 120px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .language-list.show {
            display: block;
        }

        .language-option {
            padding: 8px 12px;
            color: #1d1d1f;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .language-option:hover {
            background: #f5f5f7;
        }

        .language-option.selected {
            background: #0071e3;
            color: #fff;
        }

        /* ‰∏ªÊ†áÈ¢òÂíåËØ¥ÊòéÊñáÂ≠óÊ†∑ÂºèË∞ÉÊï¥ */
        .app-title {
            font-size: 35.28px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0 0 16px;  /* Ë∞ÉÊï¥Â∫ïÈÉ®Èó¥Ë∑ù */
            text-align: center;
            padding-top: 20px;  /* Â¢ûÂä†È°∂ÈÉ®Èó¥Ë∑ù */
        }

        .app-subtitle {
            text-align: center;
            color: #1d1d1f;
            margin: 0 0 8px;  /* Ë∞ÉÊï¥Ë°åÈó¥Ë∑ù */
            font-size: 15.75px;
        }

        .app-instruction {
            text-align: center;
            color: #86868b;
            margin: 0 0 40px;  /* Â¢ûÂä†‰∏é‰∏ãÊñπÂÜÖÂÆπÁöÑÈó¥Ë∑ù */
            font-size: 14.7px;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫ÂüüË∞ÉÊï¥ */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;  /* ÁßªÈô§ÂÜÖËæπË∑ù */
            background: white;
            border-radius: 18px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .main-content {
            padding: 20px;  /* Ê∑ªÂä†ÂÜÖËæπË∑ù */
        }

        /* ÂØºËà™Âå∫Âüü */
        .navigation {
            display: flex;
            flex-direction: row;
            gap: 12px;
            margin-bottom: 20px;
        }

        .nav-section {
            position: relative;
            flex: 1;
        }

        .nav-title {
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            font-weight: 500;
            color: #1d1d1f;
            padding: 8px 12px;
            background: #f5f5f7;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            white-space: nowrap;
        }

        .nav-title::after {
            content: '‚ñº';
            font-size: 10.5px; /* ÂéüÂßã 10px Â¢ûÂä† 5% */
            color: #86868b;
            transition: transform 0.3s ease;
            margin-left: 6px;
        }

        .nav-title.active::after {
            transform: rotate(180deg);
        }

        .nav-title:hover {
            background: #e5e5e7;
        }

        .nav-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 8px;
            margin-top: 8px;
            z-index: 10;
            display: none;
            max-height: 300px;
            overflow-y: auto;
            min-width: 160px;
        }

        .nav-list.active {
            display: block;
        }

        .nav-item {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            white-space: nowrap;
        }

        .nav-item:hover {
            background: #f5f5f7;
        }

        .nav-item.selected {
            background: #0071e3;
            color: white;
        }

        /* ÊêúÁ¥¢Ê°Ü */
        .search-box {
            position: relative;
            margin-bottom: 8px;
        }

        .search-box input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d2d2d7;
            border-radius: 6px;
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            background: #f5f5f7;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #0071e3;
            background: white;
        }

        /* Â§©Ê∞î‰ø°ÊÅØ */
        .weather-info {
            background: white;
            border-radius: 18px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 24px;
        }

        .current-weather {
            text-align: center;
            flex: 0 0 200px;
            padding: 20px;
            background: #f5f5f7;
            border-radius: 12px;
        }

        .current-temp {
            font-size: 37.8px; /* ÂéüÂßã 36px Â¢ûÂä† 5% */
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .current-details {
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            color: #1d1d1f;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .last-update {
            font-size: 12.6px; /* ÂéüÂßã 12px Â¢ûÂä† 5% */
            color: #86868b;
        }

        /* Â§©Ê∞îÈ¢ÑÊä•Âç°ÁâáÂÆπÂô® */
        .forecast-wrapper {
            position: relative;
            flex: 1;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .forecast-scroll {
            display: flex;
            gap: 12px;
            transition: transform 0.3s ease;
            padding: 0 32px;
            width: calc(175% + 24px); /* Ë∞ÉÊï¥‰∏∫ÂèØ‰ª•ÂÆπÁ∫≥7Âº†Âç°ÁâáÁöÑÂÆΩÂ∫¶ */
        }

        /* Â§©Ê∞îÈ¢ÑÊä•Âç°Áâá */
        .forecast-card {
            flex: 0 0 calc(14.28% - 10.3px);
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .forecast-card.active {
            background: #0071e3;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 113, 227, 0.2);
        }

        .forecast-weather-data {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 0.9rem;
            color: #666;
        }

        .forecast-card.active .forecast-weather-data {
            color: rgba(255, 255, 255, 0.9);
        }

        .weather-icon {
            font-size: 1.4rem;
            margin: 8px 0;
        }

        /* ÂØºËà™ÊåâÈíÆ */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 100%;
            border: none;
            background: rgba(0, 0, 0, 0.03);
            color: #1d1d1f;
            font-size: 16.8px; /* ÂéüÂßã 16px Â¢ûÂä† 5% */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            transition: all 0.2s ease;
        }

        .nav-arrow:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        .nav-arrow.prev {
            left: 0;
            border-top-left-radius: 12px;
            border-bottom-left-radius: 12px;
        }

        .nav-arrow.next {
            right: 0;
            border-top-right-radius: 12px;
            border-bottom-right-radius: 12px;
        }

        .nav-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            background: rgba(0, 0, 0, 0.03);
        }

        .nav-arrow::before {
            content: '';
            width: 10px;
            height: 10px;
            border-style: solid;
            border-width: 2px 2px 0 0;
            display: inline-block;
            position: relative;
            transform: rotate(-135deg);
            transition: transform 0.2s ease;
        }

        .nav-arrow.next::before {
            transform: rotate(45deg);
        }

        .forecast-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .forecast-date {
            font-size: 12.6px; /* ÂéüÂßã 12px Â¢ûÂä† 5% */
            font-weight: 500;
            margin-bottom: 6px;
            color: #86868b;
        }

        .forecast-weather {
            font-size: 21px; /* ÂéüÂßã 20px Â¢ûÂä† 5% */
            margin: 6px 0;
        }

        .forecast-temp {
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            margin: 6px 0;
            font-weight: 500;
        }

        .forecast-details {
            font-size: 11.55px; /* ÂéüÂßã 11px Â¢ûÂä† 5% */
            color: #86868b;
            line-height: 1.4;
        }

        .forecast-card.active .forecast-date,
        .forecast-card.active .forecast-details {
            color: rgba(255, 255, 255, 0.8);
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .weather-info {
                flex-direction: column;
            }

            .current-weather {
                flex: none;
                width: 100%;
            }

            .forecast-scroll {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Á©øÊê≠Âª∫ËÆÆ */
        .outfit-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 2rem;
            padding: 20px;
            gap: 2rem;
        }

        .outfit-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 24px;
            width: 300px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 0 12px;
        }

        .outfit-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .outfit-icon {
            font-size: 1.8rem;
            margin-right: 12px;
        }

        .outfit-title {
            font-size: 1.2rem;
            font-weight: 500;
            color: #333;
        }

        .outfit-temp {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
            color: #0071e3;
            margin-bottom: 16px;
        }

        .outfit-temp-icon {
            margin-right: 8px;
        }

        .outfit-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .outfit-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .outfit-item:last-child {
            border-bottom: none;
        }

        .outfit-item-icon {
            margin-right: 12px;
            color: #666;
        }

        /* Ê∑ªÂä†ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä */
        @media (max-width: 1024px) {
            .outfit-container {
                flex-direction: column;
                align-items: center;
            }
            
            .outfit-card {
                width: 90%;
                max-width: 300px;
                margin-bottom: 1rem;
            }
        }

        /* Á°Æ‰øùÂÜÖÂÆπÂú®È°µÈù¢Â∫ïÈÉ® */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-bottom: 2rem;
        }

        .main-content {
            flex: 1;
        }

        /* Á©øÊê≠Êé®ËçêÂÆπÂô®ÁöÑÊñ∞Ê†∑Âºè */
        #outfit-recommendations {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: auto;
            padding: 2rem 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        /* ÈîôËØØ‰ø°ÊÅØ */
        .error-message {
            text-align: center;
            padding: 20px;
            background: #fff3f3;
            border-radius: 12px;
            color: #ff3b30;
            font-size: 14.7px; /* ÂéüÂßã 14px Â¢ûÂä† 5% */
            margin-top: 20px;
        }

        /* Âä†ËΩΩÊåáÁ§∫Âô® */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0071e3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Âä®ÁîªÊïàÊûú */
        .nav-item, .outfit-card, .forecast-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .nav-item:active, .outfit-card:active, .forecast-card:active {
            transform: scale(0.98);
        }

        /* Êó•ÊúüÂØºËà™Ê†∑Âºè */
        .calendar-wrapper {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-top: 8px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .calendar-title {
            font-size: 16px;
            font-weight: 500;
            color: #1d1d1f;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-nav button {
            background: none;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            color: #0071e3;
            border-radius: 6px;
        }

        .calendar-nav button:hover {
            background: #f5f5f7;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            text-align: center;
        }

        .calendar-weekday {
            font-size: 12px;
            color: #86868b;
            padding: 4px;
            font-weight: 500;
        }

        .calendar-day {
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            font-size: 14px;
        }

        .calendar-day:hover {
            background: #f5f5f7;
        }

        .calendar-day.active {
            background: #0071e3;
            color: white;
        }

        .calendar-day.today {
            font-weight: 600;
        }

        .calendar-day.has-weather::after {
            content: '‚Ä¢';
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            color: #0071e3;
            font-size: 12px;
        }

        .calendar-day.active.has-weather::after {
            color: white;
        }

        .calendar-day.disabled {
            color: #d2d2d7;
            cursor: not-allowed;
        }

        .outfit-content {
            margin-top: 1rem;
            text-align: left;
        }

        .outfit-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .outfit-content li {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .outfit-content li:last-child {
            border-bottom: none;
        }

        .outfit-content i {
            margin-right: 12px;
            color: #0071e3;
        }

        #outfit-recommendations {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 2rem;
            padding: 2rem 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        @media (max-width: 1024px) {
            #outfit-recommendations {
                flex-direction: column;
                align-items: center;
            }

            .outfit-card {
                width: 90%;
                max-width: 300px;
                margin: 1rem 0;
            }
        }

        /* Ê∑ªÂä†Áî®Êà∑ËØÑ‰ª∑Âå∫ÂüüÁöÑÊ†∑Âºè */
        .testimonials-section {
            background: #1a1a1a;
            color: #fff;
            padding: 80px 20px;
            text-align: center;
        }

        .testimonials-header {
            max-width: 800px;
            margin: 0 auto 60px;
        }

        .testimonials-title {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .testimonials-title span {
            color: #fff;
        }

        .testimonials-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
        }

        .testimonials-container {
            display: flex;
            gap: 24px;
            overflow-x: auto;
            padding: 20px 40px;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            margin: 0 -40px;
        }

        .testimonial-card {
            flex: 0 0 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 32px;
            scroll-snap-align: start;
            transition: all 0.3s ease;
            text-align: left;
            backdrop-filter: blur(10px);
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .testimonial-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            margin-right: 16px;
            background: #fff;
            overflow: hidden;
        }

        .testimonial-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .testimonial-info {
            flex: 1;
        }

        .testimonial-name {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 4px;
            color: #fff;
        }

        .testimonial-position {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .testimonial-stars {
            display: flex;
            gap: 4px;
            color: #ffd700;
            font-size: 1.2rem;
            margin-bottom: 16px;
        }

        .testimonial-content {
            font-size: 1rem;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
        }

        /* Ëá™ÂÆö‰πâÊªöÂä®Êù° */
        .testimonials-container::-webkit-scrollbar {
            height: 8px;
        }

        .testimonials-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .testimonials-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .testimonials-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 768px) {
            .testimonials-title {
                font-size: 2.2rem;
            }

            .testimonial-card {
                flex: 0 0 300px;
                padding: 24px;
            }
        }

        /* Ê∑ªÂä†ÂØºËà™ÊåâÈíÆÊ†∑Âºè */
        .testimonials-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }

        .testimonials-nav:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .testimonials-nav.prev {
            left: 20px;
        }

        .testimonials-nav.next {
            right: 20px;
        }

        /* ÈªòËÆ§Áî®Êà∑Â§¥ÂÉèÊ†∑Âºè */
        .testimonial-avatar {
            background: #2c2c2c;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 24px;
        }

        /* Ê∑ªÂä†ÊåáÁ§∫Âô®Ê†∑Âºè */
        .testimonials-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 32px;
        }

        .indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: #fff;
            transform: scale(1.2);
        }
 HEAD

        /* Ê∏©Â∫¶Âçï‰ΩçÂàáÊç¢ÊåâÈíÆ */
        .unit-switch {
            position: absolute;
            top: 20px;
            right: 120px; /* ‰Ωç‰∫éËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆÂ∑¶‰æß */
            margin: 0;
        }

        .unit-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            background: #0071e3;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14.7px;
            font-weight: 500;
            min-width: 80px;
            justify-content: space-between;
        }

        .unit-btn:hover {
            background: #0077ed;
        }

        .unit-list {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: #fff;
            border-radius: 6px;
            padding: 4px;
            display: none;
            z-index: 1000;
            min-width: 100px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .unit-list.show {
            display: block;
        }

        .unit-option {
            padding: 8px 12px;
            color: #1d1d1f;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .unit-option:hover {
            background: #f5f5f7;
        }

        .unit-option.selected {
            background: #0071e3;
            color: #fff;
        }

        /* Ê∏©Â∫¶ÊòæÁ§∫Ê†∑Âºè‰ºòÂåñ */
        .temperature-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 24px;
            font-weight: 500;
            color: #1d1d1f;
            margin: 10px 0;
        }

        .temperature-value {
            font-size: 32px;
            font-weight: 600;
        }

        .temperature-unit {
            font-size: 20px;
            color: #86868b;
            margin-left: 4px;
        }

        .temperature-range {
            font-size: 16px;
            color: #86868b;
            margin-left: 12px;
            padding-left: 12px;
            border-left: 1px solid #d2d2d7;
        }

        /* Ê∏©Â∫¶Âçï‰ΩçÂàáÊç¢ÊåâÈíÆÊ†∑Âºè‰ºòÂåñ */
        .unit-switch {
            position: absolute;
            top: 20px;
            right: 120px;
            margin: 0;
            z-index: 1000;
        }

        .unit-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            background: #0071e3;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14.7px;
            font-weight: 500;
            min-width: 80px;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .unit-btn:hover {
            background: #0077ed;
            transform: translateY(-1px);
        }

        .unit-list {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: #fff;
            border-radius: 6px;
            padding: 4px;
            display: none;
            z-index: 1000;
            min-width: 100px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .unit-list.show {
            display: block;
        }

        .unit-option {
            padding: 8px 12px;
            color: #1d1d1f;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .unit-option:hover {
            background: #f5f5f7;
        }

        .unit-option.selected {
            background: #0071e3;
            color: #fff;
        }

        .unit-option.selected::after {
            content: '‚úì';
            margin-left: 8px;
        }

        /* Êó∂Âå∫ÊòæÁ§∫Ê†∑Âºè */
        .timezone-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #86868b;
            margin: 4px 0;
        }

        .timezone-icon {
            font-size: 16px;
        }

        .local-time {
            font-weight: 500;
            color: #1d1d1f;
        }

        .timezone-name {
            color: #86868b;
        }

        /* Êó∂Âå∫ÈÄâÊã©Âô®Ê†∑Âºè */
        .timezone-selector {
            position: absolute;
            top: 20px;
            right: 220px;
            margin: 0;
            z-index: 1000;
        }

        .timezone-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            background: #0071e3;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14.7px;
            font-weight: 500;
            min-width: 120px;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .timezone-btn:hover {
            background: #0077ed;
            transform: translateY(-1px);
        }

        .timezone-list {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: #fff;
            border-radius: 6px;
            padding: 4px;
            display: none;
            z-index: 1000;
            min-width: 200px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.2s ease;
        }

        .timezone-list.show {
            display: block;
        }

        .timezone-option {
            padding: 8px 12px;
            color: #1d1d1f;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .timezone-option:hover {
            background: #f5f5f7;
        }

        .timezone-option.selected {
            background: #0071e3;
            color: #fff;
        }

        .timezone-option.selected::after {
            content: '‚úì';
            margin-left: 8px;
        }

        /* ÁßªÂä®Á´Ø‰ºòÂåñ */
        @media (max-width: 768px) {
            /* È°∂ÈÉ®ÊåâÈíÆÁªÑÊ†∑Âºè */
            .top-buttons {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                display: flex;
                justify-content: flex-end;
                gap: 8px;
                padding: 12px;
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                z-index: 1000;
            }

            .language-switch,
            .unit-switch,
            .timezone-selector {
                position: static;
                margin: 0;
            }

            .language-btn,
            .unit-btn,
            .timezone-btn {
                padding: 6px 10px;
                font-size: 13px;
                min-width: auto;
            }

            /* ‰∏ªÂÆπÂô®Ë∞ÉÊï¥ */
            .app-container {
                margin-top: 60px;
                border-radius: 0;
            }

            /* Ê∏©Â∫¶ÊòæÁ§∫Ë∞ÉÊï¥ */
            .temperature-display {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }

            .temperature-value {
                font-size: 28px;
            }

            .temperature-range {
                margin-left: 0;
                padding-left: 0;
                border-left: none;
            }

            /* Êó∂Âå∫ÊòæÁ§∫Ë∞ÉÊï¥ */
            .timezone-display {
                flex-direction: column;
                align-items: flex-start;
            }

            /* ‰∏ãÊãâËèúÂçïË∞ÉÊï¥ */
            .language-list,
            .unit-list,
            .timezone-list {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                margin: 0;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
                animation: slideUp 0.3s ease;
            }

            @keyframes slideUp {
                from { transform: translateY(100%); }
                to { transform: translateY(0); }
            }

            /* ÂÜÖÂÆπÂå∫ÂüüË∞ÉÊï¥ */
            .main-content {
                padding: 16px;
            }

            .app-title {
                font-size: 28px;
                margin-bottom: 12px;
            }

            .app-subtitle {
                font-size: 14px;
                margin-bottom: 6px;
            }

            .app-instruction {
                font-size: 13px;
                margin-bottom: 24px;
            }
        }

        /* Ê∑ªÂä†ÂÆâÂÖ®Âå∫ÂüüÊîØÊåÅ */
        @supports (padding: max(0px)) {
            @media (max-width: 768px) {
                .top-buttons {
                    padding-top: max(12px, env(safe-area-inset-top));
                    padding-bottom: max(12px, env(safe-area-inset-bottom));
                }

                .language-list,
                .unit-list,
                .timezone-list {
                    padding-bottom: max(16px, env(safe-area-inset-bottom));
                }
            }
        }

        /* ÂèçÈ¶àÂå∫ÂùóÊ†∑Âºè */
        .feedback-section {
            margin-top: 3rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .feedback-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 1rem;
            text-align: center;
        }

        .feedback-description {
            font-size: 1.1rem;
            color: #86868b;
            text-align: center;
            margin-bottom: 2rem;
        }

        .feedback-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .feedback-form .form-group {
            margin-bottom: 1.5rem;
        }

        .feedback-form label {
            display: block;
            font-size: 1rem;
            font-weight: 500;
            color: #1d1d1f;
            margin-bottom: 0.5rem;
        }

        .feedback-form input[type="text"],
        .feedback-form input[type="email"],
        .feedback-form textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            font-size: 1rem;
            color: #1d1d1f;
            background: #f5f5f7;
            transition: all 0.3s ease;
        }

        .feedback-form input:focus,
        .feedback-form textarea:focus {
            outline: none;
            border-color: #0071e3;
            background: #fff;
        }

        .rating-stars {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        .rating-stars input {
            display: none;
        }

        .rating-stars label {
            font-size: 2rem;
            color: #d2d2d7;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .rating-stars label:hover,
        .rating-stars label:hover ~ label,
        .rating-stars input:checked ~ label {
            color: #ffd700;
        }

        .feedback-submit {
            display: block;
            width: 100%;
            padding: 1rem;
            background: #0071e3;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .feedback-submit:hover {
            background: #0077ed;
            transform: translateY(-1px);
        }

        .feedback-submit:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .feedback-section {
                padding: 1.5rem;
                margin-top: 2rem;
            }

            .feedback-title {
                font-size: 1.5rem;
            }

            .feedback-description {
                font-size: 1rem;
            }

            .rating-stars label {
                font-size: 1.8rem;
            }
        }
    </style>

    </style>

    <!-- È¢ÑÂä†ËΩΩÂÖ≥ÈîÆËµÑÊ∫ê -->
    <link rel="preconnect" href="https://api.open-meteo.com">
 e2c9aa40afba0c52a546b9926df4f2efd1b2c263
</head>
<body>
    <!-- Ê∑ªÂä†Âä†ËΩΩÊåáÁ§∫Âô® -->
    <div id="loading-indicator" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none;">
        <div class="spinner"></div>
    </div>

 HEAD
    <div class="top-nav">
        <div class="nav-container">
            <div class="nav-left">
                <a href="/" class="logo">
                    <span class="logo-icon">üå§Ô∏è</span>
                    <span class="logo-text">Travel Outfit</span>
                </a>
            </div>
            <div class="nav-right">
                <div class="unit-switch">
                    <button class="switch-btn" id="unitBtn">
                        <span id="currentUnit">¬∞C</span>
                    </button>
                    <div class="switch-list" id="unitList">
                        <div class="switch-option" data-unit="C">¬∞C</div>
                        <div class="switch-option" data-unit="F">¬∞F</div>
                    </div>
                </div>
                <div class="language-switch">
                    <button class="switch-btn" id="languageBtn">
                        <span id="currentLang">English</span>
                    </button>
                    <div class="switch-list" id="languageList">
                        <div class="switch-option" data-lang="en">English</div>
                        <div class="switch-option" data-lang="zh">‰∏≠Êñá</div>
                        <div class="switch-option" data-lang="ja">Êó•Êú¨Ë™û</div>
                        <div class="switch-option" data-lang="ko">ÌïúÍµ≠Ïñ¥</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="header">
            <div class="banner-container">
                <picture>
                    <source srcset="assets/images/banner.webp" type="image/webp">
                    <img src="assets/images/banner.jpg" alt="Travel outfit banner" width="1200" height="400">
                </picture>
            </div>
            <h1 class="app-title">Smart Travel Outfit Guide</h1>
            <p class="subtitle">Get personalized outfit recommendations based on your destination's weather</p>
        </header>

        <main class="main-content">
            <section class="search-section">
                <div class="form-group">
                    <label for="destination">Destination</label>
                    <input type="text" id="destination" placeholder="Enter city name">
                </div>
                <div class="form-group">
                    <label for="travel-date">Travel Date</label>
                    <input type="date" id="travel-date">
                </div>
            </section>

            <div id="weather-info" class="weather-display" style="display: none;">
                <!-- Weather information will be inserted here -->
            </div>

            <div id="outfit-recommendations" class="outfit-container">
                <!-- Outfit recommendations will be inserted here -->
            </div>

            <section class="feedback-section">
                <h2 class="feedback-title">Share Your Experience</h2>
                <p class="feedback-description">Help us improve our recommendations by sharing your feedback</p>
                
                <form class="feedback-form" id="feedbackForm">
                    <input type="text" placeholder="Your Name" required>
                    <input type="email" placeholder="Your Email (optional)">
                    
                    <div class="rating-stars">
                        <input type="radio" name="rating" id="star5" value="5">
                        <label for="star5">‚òÖ</label>
                        <input type="radio" name="rating" id="star4" value="4">
                        <label for="star4">‚òÖ</label>
                        <input type="radio" name="rating" id="star3" value="3">
                        <label for="star3">‚òÖ</label>
                        <input type="radio" name="rating" id="star2" value="2">
                        <label for="star2">‚òÖ</label>
                        <input type="radio" name="rating" id="star1" value="1">
                        <label for="star1">‚òÖ</label>
                    </div>
                    
                    <textarea placeholder="Share your thoughts about our recommendations..." required></textarea>
                    <button type="submit" class="feedback-submit">Submit Feedback</button>
                </form>
            </section>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Stay Updated</h3>
                    <p>Subscribe to receive the latest outfit recommendations and travel tips.</p>
                    <form id="subscribeForm" class="subscribe-form">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="privacy-notice">By subscribing, you agree to our <a href="/privacy">Privacy Policy</a></p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                        <li><a href="/contact">Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect With Us</h3>
                    <div class="social-links">
                        <a href="#" class="social-link">Twitter</a>
                        <a href="#" class="social-link">Facebook</a>
                        <a href="#" class="social-link">Instagram</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Travel Outfit. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Â∏ÆÂä©ÁøªËØëÈìæÊé• -->
    <a href="https://crowdin.com/project/your-project" class="help-translate" target="_blank">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        </svg>
        <span data-i18n="helpTranslate">Help translate</span>
    </a>

    <div class="subscribe-section">
        <h2 class="section-title">Stay Updated</h2>
        <p class="section-description">Subscribe to receive the latest outfit recommendations and travel tips.</p>
        <form id="subscribeForm" class="subscribe-form">
            <input type="email" id="subscribeEmail" placeholder="Enter your email" required>
            <button type="submit" class="primary-button">Subscribe</button>
        </form>
        <p class="privacy-notice">By subscribing, you agree to our <a href="/privacy">Privacy Policy</a> and consent to receive marketing emails.</p>
    </div>

    <!-- Áî®Êà∑ÂèçÈ¶àÂå∫Âùó -->
    <div class="container feedback-section">
        <h2 class="section-title">Êàë‰ª¨ÊúüÂæÖÊÇ®ÁöÑÂèçÈ¶à</h2>
        <p class="section-description">ÊÇ®ÁöÑÊÑèËßÅÂØπÊàë‰ª¨ÂæàÈáçË¶ÅÔºÅËØ∑ÂàÜ‰∫´ÊÇ®ÁöÑÊÉ≥Ê≥ïÊàñÂª∫ËÆÆÔºåÂ∏ÆÂä©Êàë‰ª¨ÊîπËøõÁΩëÁ´ô„ÄÇ</p>
        <a href="mailto:feedback@travel-outfit.com" class="primary-button feedback-button">ÂèëÈÄÅÂèçÈ¶à</a>
    </div>

    <div class="banner-container">
        <picture>
            <source srcset="assets/images/shield-icon.webp" type="image/webp">
            <img src="assets/images/shield-icon.png" alt="Travel Outfit Shield" width="120" height="120">
        </picture>
    </div>

    <script src="main.js" defer></script>
</body>
</html>

    <div class="container">
        <div class="language-switch">
            <button class="language-btn" onclick="toggleLanguageList()">
                <span class="globe-icon">üåê</span>
                <span class="current-lang">English</span>
            </button>
            <div class="language-list" id="languageList">
                <div class="language-option selected" onclick="switchLanguage('en')">English</div>
                <div class="language-option" onclick="switchLanguage('zh')">ÁÆÄ‰Ωì‰∏≠Êñá</div>
                <div class="language-option" onclick="switchLanguage('zh-TW')">ÁπÅÈ´î‰∏≠Êñá</div>
                <div class="language-option" onclick="switchLanguage('ja')">Êó•Êú¨Ë™û</div>
                <div class="language-option" onclick="switchLanguage('ko')">ÌïúÍµ≠Ïñ¥</div>
                <div class="language-option" onclick="switchLanguage('de')">Deutsch</div>
                <div class="language-option" onclick="switchLanguage('fr')">Fran√ßais</div>
                <div class="language-option" onclick="switchLanguage('it')">Italiano</div>
                <div class="language-option" onclick="switchLanguage('es')">Espa√±ol</div>
                <div class="language-option" onclick="switchLanguage('pt')">Portugu√™s</div>
                <div class="language-option" onclick="switchLanguage('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
    </div>
        </div>
        <div class="app-container">
            <h1 class="app-title">ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó</h1>
            <p class="app-subtitle">Âá†ÁßíÂÜÖÂ∞ÜÁîüÊàê‰ª§‰∫∫ÊÉäÂèπÁöÑAIÊé®ËçêÁ©øÊê≠</p>
            <p class="app-instruction">Áõ¥Êé•Âú®‰∏ãÊñπÈÄâÊã©/ËæìÂÖ•ÂõΩÂÆ∂ÔºåÂüéÂ∏ÇÔºåÊó•Êúü</p>
            
            <div class="main-content">
                <div class="navigation">
                    <div class="nav-section">
                        <div class="nav-title" id="country-title">
                            <span class="nav-text">Select Country</span>
                        </div>
                        <div class="nav-list" id="country-list">
                            <input type="text" class="search-box" placeholder="Search country..." onkeyup="filterList(this, 'country-list')">
                            <div class="nav-items"></div>
                        </div>
                    </div>
                    <div class="nav-section">
                        <div class="nav-title" id="city-title">
                            <span class="nav-text">Select City</span>
                        </div>
                        <div class="nav-list" id="city-list">
                            <input type="text" class="search-box" placeholder="Search city..." onkeyup="filterList(this, 'city-list')">
                            <div class="nav-items"></div>
                        </div>
                    </div>
                    <div class="nav-section">
                        <div class="nav-title" id="date-title">
                            <span class="nav-text">Select Date</span>
                        </div>
                        <div class="nav-list" id="date-list">
                            <div class="nav-items"></div>
                        </div>
                    </div>
                </div>

                <div id="weather-info" class="weather-info">
                    <div id="current-weather" class="current-weather"></div>
                    <div id="forecast-container" class="forecast-wrapper"></div>
                </div>
            </div>

            <div id="outfit-recommendations" class="outfit-container"></div>
        </div>
    </div>

    <style>
        /* ÈùûÈòªÂ°ûCSS */
        /* Ê∑ªÂä†‰Ω†ÁöÑÂÖ∂‰ªñCSSÊ†∑Âºè */
    </style>

    <script>
        // ÊÄßËÉΩ‰ºòÂåñÈÖçÁΩÆ
        const PERFORMANCE_CONFIG = {
            CACHE_DURATION: 15 * 60 * 1000, // 15ÂàÜÈíüÁºìÂ≠ò
            REQUEST_TIMEOUT: 10000, // 10ÁßíË∂ÖÊó∂
            AUTO_REFRESH_INTERVAL: 15 * 60 * 1000, // 15ÂàÜÈíüËá™Âä®Âà∑Êñ∞
            MAX_RETRY_ATTEMPTS: 3
        };

        // ÂàùÂßãÂåñÊÄßËÉΩÁõëÊéß
        const performance = {
            timing: {},
            mark(name) {
                this.timing[name] = Date.now();
            },
            measure(start, end) {
                if (this.timing[start] && this.timing[end]) {
                    return this.timing[end] - this.timing[start];
                }
                return 0;
            }
        };

        // È°µÈù¢Âä†ËΩΩ‰ºòÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            performance.mark('domReady');
            
            // Á´ãÂç≥ÊòæÁ§∫È°µÈù¢Ê°ÜÊû∂
            requestAnimationFrame(() => {
                document.body.style.visibility = 'visible';
            });
            
            // Âª∂ËøüÂä†ËΩΩÈùûÂÖ≥ÈîÆËµÑÊ∫ê
            setTimeout(() => {
                initializeApp();
            }, 0);

            // Ê∑ªÂä†ÂØºËà™Ê†áÈ¢òÁÇπÂáª‰∫ã‰ª∂
            const titles = document.querySelectorAll('.nav-title');
            titles.forEach(title => {
                title.addEventListener('click', () => {
                    const list = title.parentElement.querySelector('.nav-list');
                    const isActive = list.classList.contains('active');
                    
                    // ÂÖ≥Èó≠ÊâÄÊúâÂÖ∂‰ªñÊâìÂºÄÁöÑÂàóË°®
                    document.querySelectorAll('.nav-list').forEach(otherList => {
                        if (otherList !== list) {
                            otherList.classList.remove('active');
                            otherList.parentElement.querySelector('.nav-title').classList.remove('active');
                        }
                    });
                    
                    // ÂàáÊç¢ÂΩìÂâçÂàóË°®
                    list.classList.toggle('active');
                    title.classList.toggle('active');
                });
            });

            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ÊâÄÊúâ‰∏ãÊãâÂàóË°®
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-section')) {
                    document.querySelectorAll('.nav-list').forEach(list => {
                        list.classList.remove('active');
                        list.parentElement.querySelector('.nav-title').classList.remove('active');
                    });
                }
            });

            // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ‰∏∫Ëã±ËØ≠
            currentLang = 'en';
            localStorage.setItem('preferred_language', 'en');
            
            // Êõ¥Êñ∞ÁïåÈù¢ÊñáÊú¨
            updateInterfaceText('en');
            
            // Êõ¥Êñ∞ËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
            const currentLangSpan = document.querySelector('.current-lang');
            if (currentLangSpan) {
                currentLangSpan.textContent = 'English';
            }

            // Êõ¥Êñ∞ÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.toggle('selected', option.textContent === 'English');
            });

            // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
            document.querySelector('.app-title').textContent = 'üåç Travel Outfit Advisor';

            // Êõ¥Êñ∞ÂØºËà™ÊñáÊú¨
            document.querySelector('#country-title .nav-text').textContent = 'Select Country';
            document.querySelector('#city-title .nav-text').textContent = 'Select City';
            document.querySelector('#date-title .nav-text').textContent = 'Select Date';

            // Êõ¥Êñ∞ÊêúÁ¥¢Ê°ÜÂç†‰ΩçÁ¨¶
            const countrySearch = document.querySelector('#country-list .search-box');
            const citySearch = document.querySelector('#city-list .search-box');
            if (countrySearch) countrySearch.placeholder = 'Search country...';
            if (citySearch) citySearch.placeholder = 'Search city...';

            // Ê∏≤ÊüìÂõΩÂÆ∂ÂàóË°®
            renderCountryList('en');
        });

        // ‰ºòÂåñÂàùÂßãÂåñËøáÁ®ã
        function initializeApp() {
            performance.mark('appInit');

            // Âä†ËΩΩÊúÄËøëËÆøÈóÆÁöÑÂüéÂ∏Ç
            try {
                const recentCities = JSON.parse(localStorage.getItem('recentCities')) || [];
                if (recentCities.length > 0) {
                    const city = recentCities[0];
                    if (city.lat && city.lon) {
                        getWeatherData(city.lat, city.lon, currentLang);
                    }
                }
            } catch (error) {
                console.error('Error loading recent cities:', error);
            }

            performance.mark('appInitEnd');
            console.log('App initialization time:', performance.measure('appInit', 'appInitEnd'), 'ms');
        }

        // ‰ºòÂåñÊï∞ÊçÆËØ∑Ê±Ç
        async function fetchWithRetry(url, options = {}, retryCount = 0) {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), PERFORMANCE_CONFIG.REQUEST_TIMEOUT);

                const response = await fetch(url, {
                    ...options,
                    signal: controller.signal
                });

                clearTimeout(timeoutId);
                return response;
            } catch (error) {
                if (retryCount < PERFORMANCE_CONFIG.MAX_RETRY_ATTEMPTS) {
                    // ÊåáÊï∞ÈÄÄÈÅøÈáçËØï
                    const delay = Math.min(1000 * Math.pow(2, retryCount), 5000);
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithRetry(url, options, retryCount + 1);
                }
                throw error;
            }
        }

        // ÂàùÂßãÂåñÂä†ËΩΩÁä∂ÊÄÅÁÆ°ÁêÜ
        const loadingStates = {
            LOADING: 'loading',
            READY: 'ready',
            ERROR: 'error'
        };

        let pageState = loadingStates.LOADING;

        // ÊòæÁ§∫/ÈöêËóèÂä†ËΩΩÊåáÁ§∫Âô®
        function toggleLoading(show) {
            const loader = document.getElementById('loading-indicator');
            if (loader) {
                loader.style.display = show ? 'block' : 'none';
            }
        }

        // Âª∂ËøüÂä†ËΩΩÈùûÂÖ≥ÈîÆËµÑÊ∫ê
        function loadNonCriticalResources() {
            // ÂàùÂßãÂåñÂ∫îÁî®
            initializeApp();
        }

        const translations = {
            en: {
                cityNotFound: "City not found. Please check the city name and try again.",
                enterCity: "Please enter a city name!",
                networkError: "Failed to fetch weather data. Please try again later.",
                loading: "Loading...",
                recommendedOutfit: "Recommended Outfit",
                weeklyForecast: "7-Day Forecast",
                today: "Today",
                weather: {
                    clear: "Clear",
                    clouds: "Cloudy",
                    rain: "Rainy",
                    snow: "Snowy",
                    thunderstorm: "Thunderstorm",
                    drizzle: "Drizzle",
                    mist: "Misty",
                    fog: "Foggy",
                    unknown: "--"
                },
                outfits: {
                    cold: "‚ùÑÔ∏è <strong>Cold Weather:</strong><br>- Thick winter coat<br>- Thermal underwear<br>- Wool sweater<br>- Warm pants<br>- Winter boots<br>- Scarf, gloves, and hat",
                    mild: "üçÇ <strong>Mild Weather:</strong><br>- Light jacket or cardigan<br>- Long sleeve shirt<br>- Regular pants or jeans<br>- Comfortable shoes<br>- Light scarf (optional)",
                    warm: "‚òÄÔ∏è <strong>Warm Weather:</strong><br>- T-shirt or short sleeve shirt<br>- Shorts or light pants<br>- Sandals or breathable shoes<br>- Sun hat<br>- Sunglasses",
                    rainTip: "<br>üåß <strong>Rain Protection:</strong><br>- Waterproof jacket<br>- Umbrella<br>- Water-resistant shoes",
                    snowTip: "<br>‚ùÑÔ∏è <strong>Snow Protection:</strong><br>- Waterproof snow boots<br>- Extra warm socks<br>- Snow pants<br>- Waterproof gloves"
                },
                outfitTips: {
                    cold: "Warm layers",
                    mild: "Light jacket",
                    warm: "Light clothes"
                },
                apiKeyError: "Please provide a valid OpenWeatherMap API key.",
                humidity: 'Humidity',
                windSpeed: 'Wind Speed',
                lastUpdate: 'Last Update',
                feelsLike: 'Feels Like',
                appTitle: "Best Weather Dress Guide",
                appSubtitle: "Create stunning AI-generated outfits in seconds",
                appInstruction: "Select/input country, city, and date below",
                title: 'Best Weather Dress Guide'
            },
            zh: {
                cityNotFound: "Êâæ‰∏çÂà∞ËØ•ÂüéÂ∏ÇÔºåËØ∑Ê£ÄÊü•ÂüéÂ∏ÇÂêçÁß∞ÊòØÂê¶Ê≠£Á°Æ„ÄÇ",
                enterCity: "ËØ∑ËæìÂÖ•ÂüéÂ∏ÇÂêçÁß∞ÔºÅ",
                networkError: "Ëé∑ÂèñÂ§©Ê∞îÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ",
                loading: "Âä†ËΩΩ‰∏≠...",
                recommendedOutfit: "Êé®ËçêÁ©øÊê≠",
                weeklyForecast: "7Â§©È¢ÑÊä•",
                today: "‰ªäÂ§©",
                weather: {
                    clear: "Êô¥Â§©",
                    clouds: "Â§ö‰∫ë",
                    rain: "Èõ®Â§©",
                    snow: "Èõ™Â§©",
                    thunderstorm: "Èõ∑Èõ®",
                    drizzle: "Â∞èÈõ®",
                    mist: "ËñÑÈõæ",
                    fog: "Èõæ",
                    unknown: "--"
                },
                outfits: {
                    cold: "‚ùÑÔ∏è <strong>ÂØíÂÜ∑Â§©Ê∞îÔºö</strong><br>- ÂéöÁæΩÁªíÊúçÊàñÂÜ¨Â≠£Â§ñÂ•ó<br>- ‰øùÊöñÂÜÖË°£<br>- ÊØõË°£<br>- ‰øùÊöñÈïøË£§<br>- ÂÜ¨Èù¥<br>- Âõ¥Â∑æ„ÄÅÊâãÂ•óÂíåÂ∏ΩÂ≠ê",
                    mild: "üçÇ <strong>Ê∏©ÂíåÂ§©Ê∞îÔºö</strong><br>- ËΩªËñÑÂ§ñÂ•óÊàñÂºÄË°´<br>- ÈïøË¢ñË°¨Ë°´<br>- Â∏∏ËßÑÈïøË£§ÊàñÁâõ‰ªîË£§<br>- ËàíÈÄÇÈûãÂ≠ê<br>- ËΩªËñÑÂõ¥Â∑æÔºàÂèØÈÄâÔºâ",
                    warm: "‚òÄÔ∏è <strong>Ê∏©ÊöñÂ§©Ê∞îÔºö</strong><br>- TÊÅ§ÊàñÁü≠Ë¢ñË°¨Ë°´<br>- Áü≠Ë£§ÊàñËΩªËñÑÈïøË£§<br>- ÂáâÈûãÊàñÈÄèÊ∞îÈûã<br>- ÈÅÆÈò≥Â∏Ω<br>- Â§™Èò≥Èïú",
                    rainTip: "<br>üåß <strong>Èõ®Â§©Èò≤Êä§Ôºö</strong><br>- Èò≤Ê∞¥Â§ñÂ•ó<br>- Èõ®‰ºû<br>- Èò≤Ê∞¥Èûã",
                    snowTip: "<br>‚ùÑÔ∏è <strong>Èõ™Â§©Èò≤Êä§Ôºö</strong><br>- Èò≤Ê∞¥Èõ™Âú∞Èù¥<br>- Âä†Âéö‰øùÊöñË¢ú<br>- Èõ™Âú∞Ë£§<br>- Èò≤Ê∞¥ÊâãÂ•ó"
                },
                outfitTips: {
                    cold: "‰øùÊöñÂ±ÇË£Ö",
                    mild: "ËΩªËñÑÂ§ñÂ•ó",
                    warm: "Ê∏ÖÂáâË£ÖÊâÆ"
                },
                apiKeyError: "ËØ∑Êèê‰æõÊúâÊïàÁöÑ OpenWeatherMap API ÂØÜÈí•„ÄÇ",
                humidity: 'ÊπøÂ∫¶',
                windSpeed: 'È£éÈÄü',
                lastUpdate: 'ÊúÄÂêéÊõ¥Êñ∞',
                feelsLike: '‰ΩìÊÑüÊ∏©Â∫¶',
                appTitle: "ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó",
                appSubtitle: "Âá†ÁßíÂÜÖÂ∞ÜÁîüÊàê‰ª§‰∫∫ÊÉäÂèπÁöÑAIÊé®ËçêÁ©øÊê≠",
                appInstruction: "Áõ¥Êé•Âú®‰∏ãÊñπÈÄâÊã©/ËæìÂÖ•ÂõΩÂÆ∂ÔºåÂüéÂ∏ÇÔºåÊó•Êúü",
                title: 'ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó'
            }
        };

        // Â∏∏Áî®ÂõΩÂÆ∂ÂíåÂüéÂ∏ÇÂàóË°®
        const popularCities = {
            CN: {
                en: [
                    { name: 'Beijing', latitude: 39.9042, longitude: 116.4074 },
                    { name: 'Shanghai', latitude: 31.2304, longitude: 121.4737 },
                    { name: 'Tianjin', latitude: 39.3434, longitude: 117.3616 },
                    { name: 'Chongqing', latitude: 29.4316, longitude: 106.9123 },
                    { name: 'Guangzhou', latitude: 23.1291, longitude: 113.2644 },
                    { name: 'Nanjing', latitude: 32.0603, longitude: 118.7969 },
                    { name: 'Hangzhou', latitude: 30.2741, longitude: 120.1551 },
                    { name: 'Wuhan', latitude: 30.5928, longitude: 114.3055 },
                    { name: 'Chengdu', latitude: 30.5728, longitude: 104.0668 },
                    { name: 'Xian', latitude: 34.3416, longitude: 108.9398 },
                    { name: 'Jinan', latitude: 36.6512, longitude: 117.1201 },
                    { name: 'Zhengzhou', latitude: 34.7472, longitude: 113.6249 },
                    { name: 'Changsha', latitude: 28.2278, longitude: 112.9388 },
                    { name: 'Fuzhou', latitude: 26.0745, longitude: 119.2965 },
                    { name: 'Nanchang', latitude: 28.6820, longitude: 115.8579 },
                    { name: 'Kunming', latitude: 24.8801, longitude: 102.8329 },
                    { name: 'Hefei', latitude: 31.8206, longitude: 117.2272 },
                    { name: 'Shijiazhuang', latitude: 38.0428, longitude: 114.5149 },
                    { name: 'Taiyuan', latitude: 37.8706, longitude: 112.5489 },
                    { name: 'Changchun', latitude: 43.8171, longitude: 125.3235 },
                    { name: 'Harbin', latitude: 45.8038, longitude: 126.5340 },
                    { name: 'Shenyang', latitude: 41.8057, longitude: 123.4315 },
                    { name: 'Nanning', latitude: 22.8170, longitude: 108.3665 },
                    { name: 'Guiyang', latitude: 26.6470, longitude: 106.6302 },
                    { name: 'Lanzhou', latitude: 36.0611, longitude: 103.8343 },
                    { name: 'Xining', latitude: 36.6232, longitude: 101.7804 },
                    { name: 'Yinchuan', latitude: 38.4872, longitude: 106.2309 },
                    { name: 'Urumqi', latitude: 43.8256, longitude: 87.6168 },
                    { name: 'Hohhot', latitude: 40.8424, longitude: 111.7490 },
                    { name: 'Suzhou', latitude: 31.2990, longitude: 120.5853 },
                    { name: 'Xiamen', latitude: 24.4798, longitude: 118.0819 },
                    { name: 'Guilin', latitude: 25.2744, longitude: 110.2992 },
                    { name: 'Sanya', latitude: 18.2525, longitude: 109.5117 },
                    { name: 'Lijiang', latitude: 26.8721, longitude: 100.2346 },
                    { name: 'Dali', latitude: 25.6065, longitude: 100.2675 },
                    { name: 'Huangshan', latitude: 29.7147, longitude: 118.3147 },
                    { name: 'Zhangjiajie', latitude: 29.1170, longitude: 110.4790 },
                    { name: 'Qingdao', latitude: 36.0671, longitude: 120.3826 },
                    { name: 'Dalian', latitude: 38.9140, longitude: 121.6147 },
                    { name: 'Lhasa', latitude: 29.6500, longitude: 91.1000 }
                ],
                zh: [
                    { name: 'Âåó‰∫¨', latitude: 39.9042, longitude: 116.4074 },
                    { name: '‰∏äÊµ∑', latitude: 31.2304, longitude: 121.4737 },
                    { name: 'Â§©Ê¥•', latitude: 39.3434, longitude: 117.3616 },
                    { name: 'ÈáçÂ∫Ü', latitude: 29.4316, longitude: 106.9123 },
                    { name: 'ÂπøÂ∑û', latitude: 23.1291, longitude: 113.2644 },
                    { name: 'Âçó‰∫¨', latitude: 32.0603, longitude: 118.7969 },
                    { name: 'Êù≠Â∑û', latitude: 30.2741, longitude: 120.1551 },
                    { name: 'Ê≠¶Ê±â', latitude: 30.5928, longitude: 114.3055 },
                    { name: 'ÊàêÈÉΩ', latitude: 30.5728, longitude: 104.0668 },
                    { name: 'Ë•øÂÆâ', latitude: 34.3416, longitude: 108.9398 },
                    { name: 'ÊµéÂçó', latitude: 36.6512, longitude: 117.1201 },
                    { name: 'ÈÉëÂ∑û', latitude: 34.7472, longitude: 113.6249 },
                    { name: 'ÈïøÊ≤ô', latitude: 28.2278, longitude: 112.9388 },
                    { name: 'Á¶èÂ∑û', latitude: 26.0745, longitude: 119.2965 },
                    { name: 'ÂçóÊòå', latitude: 28.6820, longitude: 115.8579 },
                    { name: 'ÊòÜÊòé', latitude: 24.8801, longitude: 102.8329 },
                    { name: 'ÂêàËÇ•', latitude: 31.8206, longitude: 117.2272 },
                    { name: 'Áü≥ÂÆ∂Â∫Ñ', latitude: 38.0428, longitude: 114.5149 },
                    { name: 'Â§™Âéü', latitude: 37.8706, longitude: 112.5489 },
                    { name: 'ÈïøÊò•', latitude: 43.8171, longitude: 125.3235 },
                    { name: 'ÂìàÂ∞îÊª®', latitude: 45.8038, longitude: 126.5340 },
                    { name: 'Ê≤àÈò≥', latitude: 41.8057, longitude: 123.4315 },
                    { name: 'ÂçóÂÆÅ', latitude: 22.8170, longitude: 108.3665 },
                    { name: 'Ë¥µÈò≥', latitude: 26.6470, longitude: 106.6302 },
                    { name: 'ÂÖ∞Â∑û', latitude: 36.0611, longitude: 103.8343 },
                    { name: 'Ë•øÂÆÅ', latitude: 36.6232, longitude: 101.7804 },
                    { name: 'Èì∂Â∑ù', latitude: 38.4872, longitude: 106.2309 },
                    { name: '‰πåÈ≤ÅÊú®ÈΩê', latitude: 43.8256, longitude: 87.6168 },
                    { name: 'ÂëºÂíåÊµ©Áâπ', latitude: 40.8424, longitude: 111.7490 },
                    { name: 'ËãèÂ∑û', latitude: 31.2990, longitude: 120.5853 },
                    { name: 'Âé¶Èó®', latitude: 24.4798, longitude: 118.0819 },
                    { name: 'Ê°ÇÊûó', latitude: 25.2744, longitude: 110.2992 },
                    { name: '‰∏â‰∫ö', latitude: 18.2525, longitude: 109.5117 },
                    { name: '‰∏ΩÊ±ü', latitude: 26.8721, longitude: 100.2346 },
                    { name: 'Â§ßÁêÜ', latitude: 25.6065, longitude: 100.2675 },
                    { name: 'ÈªÑÂ±±', latitude: 29.7147, longitude: 118.3147 },
                    { name: 'Âº†ÂÆ∂Áïå', latitude: 29.1170, longitude: 110.4790 },
                    { name: 'ÈùíÂ≤õ', latitude: 36.0671, longitude: 120.3826 },
                    { name: 'Â§ßËøû', latitude: 38.9140, longitude: 121.6147 },
                    { name: 'ÊãâËê®', latitude: 29.6500, longitude: 91.1000 }
                ]
            },
            JP: {
                en: [
                    { name: 'Tokyo', latitude: 35.6762, longitude: 139.6503 },
                    { name: 'Osaka', latitude: 34.6937, longitude: 135.5023 },
                    { name: 'Kyoto', latitude: 35.0116, longitude: 135.7681 },
                    { name: 'Sapporo', latitude: 43.0618, longitude: 141.3545 },
                    { name: 'Fukuoka', latitude: 33.5902, longitude: 130.4017 }
                ],
                zh: [
                    { name: '‰∏ú‰∫¨', latitude: 35.6762, longitude: 139.6503 },
                    { name: 'Â§ßÈò™', latitude: 34.6937, longitude: 135.5023 },
                    { name: '‰∫¨ÈÉΩ', latitude: 35.0116, longitude: 135.7681 },
                    { name: 'Êú≠Âπå', latitude: 43.0618, longitude: 141.3545 },
                    { name: 'Á¶èÂÜà', latitude: 33.5902, longitude: 130.4017 }
                ]
            },
            US: {
                en: [
                    { name: 'New York', latitude: 40.7128, longitude: -74.0060 },
                    { name: 'Los Angeles', latitude: 34.0522, longitude: -118.2437 },
                    { name: 'Chicago', latitude: 41.8781, longitude: -87.6298 },
                    { name: 'San Francisco', latitude: 37.7749, longitude: -122.4194 },
                    { name: 'Miami', latitude: 25.7617, longitude: -80.1918 },
                    { name: 'Las Vegas', latitude: 36.1699, longitude: -115.1398 }
                ],
                zh: [
                    { name: 'Á∫ΩÁ∫¶', latitude: 40.7128, longitude: -74.0060 },
                    { name: 'Ê¥õÊùâÁü∂', latitude: 34.0522, longitude: -118.2437 },
                    { name: 'ËäùÂä†Âì•', latitude: 41.8781, longitude: -87.6298 },
                    { name: 'ÊóßÈáëÂ±±', latitude: 37.7749, longitude: -122.4194 },
                    { name: 'ËøàÈòøÂØÜ', latitude: 25.7617, longitude: -80.1918 },
                    { name: 'ÊãâÊñØÁª¥Âä†ÊñØ', latitude: 36.1699, longitude: -115.1398 }
                ]
            },
            GB: {
                en: [
                    { name: 'London', latitude: 51.5074, longitude: -0.1278 },
                    { name: 'Manchester', latitude: 53.4808, longitude: -2.2426 },
                    { name: 'Edinburgh', latitude: 55.9533, longitude: -3.1883 },
                    { name: 'Liverpool', latitude: 53.4084, longitude: -2.9916 }
                ],
                zh: [
                    { name: '‰º¶Êï¶', latitude: 51.5074, longitude: -0.1278 },
                    { name: 'ÊõºÂΩªÊñØÁâπ', latitude: 53.4808, longitude: -2.2426 },
                    { name: 'Áà±‰∏ÅÂ†°', latitude: 55.9533, longitude: -3.1883 },
                    { name: 'Âà©Áâ©Êµ¶', latitude: 53.4084, longitude: -2.9916 }
                ]
            },
            FR: {
                en: [
                    { name: 'Paris', latitude: 48.8566, longitude: 2.3522 },
                    { name: 'Nice', latitude: 43.7102, longitude: 7.2620 },
                    { name: 'Lyon', latitude: 45.7640, longitude: 4.8357 },
                    { name: 'Marseille', latitude: 43.2965, longitude: 5.3698 }
                ],
                zh: [
                    { name: 'Â∑¥Èªé', latitude: 48.8566, longitude: 2.3522 },
                    { name: 'Â∞ºÊñØ', latitude: 43.7102, longitude: 7.2620 },
                    { name: 'ÈáåÊòÇ', latitude: 45.7640, longitude: 4.8357 },
                    { name: 'È©¨Ëµõ', latitude: 43.2965, longitude: 5.3698 }
                ]
            },
            IT: {
                en: [
                    { name: 'Rome', latitude: 41.9028, longitude: 12.4964 },
                    { name: 'Milan', latitude: 45.4642, longitude: 9.1900 },
                    { name: 'Venice', latitude: 45.4408, longitude: 12.3155 },
                    { name: 'Florence', latitude: 43.7696, longitude: 11.2558 }
                ],
                zh: [
                    { name: 'ÁΩóÈ©¨', latitude: 41.9028, longitude: 12.4964 },
                    { name: 'Á±≥ÂÖ∞', latitude: 45.4642, longitude: 9.1900 },
                    { name: 'Â®ÅÂ∞ºÊñØ', latitude: 45.4408, longitude: 12.3155 },
                    { name: '‰ΩõÁΩó‰º¶Ëê®', latitude: 43.7696, longitude: 11.2558 }
                ]
            },
            DE: {
                en: [
                    { name: 'Berlin', latitude: 52.5200, longitude: 13.4050 },
                    { name: 'Munich', latitude: 48.1351, longitude: 11.5820 },
                    { name: 'Hamburg', latitude: 53.5511, longitude: 9.9937 },
                    { name: 'Frankfurt', latitude: 50.1109, longitude: 8.6821 }
                ],
                zh: [
                    { name: 'ÊüèÊûó', latitude: 52.5200, longitude: 13.4050 },
                    { name: 'ÊÖïÂ∞ºÈªë', latitude: 48.1351, longitude: 11.5820 },
                    { name: 'Ê±âÂ†°', latitude: 53.5511, longitude: 9.9937 },
                    { name: 'Ê≥ïÂÖ∞ÂÖãÁ¶è', latitude: 50.1109, longitude: 8.6821 }
                ]
            },
            AU: {
                en: [
                    { name: 'Sydney', latitude: -33.8688, longitude: 151.2093 },
                    { name: 'Melbourne', latitude: -37.8136, longitude: 144.9631 },
                    { name: 'Brisbane', latitude: -27.4705, longitude: 153.0260 },
                    { name: 'Perth', latitude: -31.9505, longitude: 115.8605 }
                ],
                zh: [
                    { name: 'ÊÇâÂ∞º', latitude: -33.8688, longitude: 151.2093 },
                    { name: 'Â¢®Â∞îÊú¨', latitude: -37.8136, longitude: 144.9631 },
                    { name: 'Â∏ÉÈáåÊñØÁè≠', latitude: -27.4705, longitude: 153.0260 },
                    { name: 'ÁèÄÊñØ', latitude: -31.9505, longitude: 115.8605 }
                ]
            },
            SG: {
                en: [
                    { name: 'Singapore', latitude: 1.3521, longitude: 103.8198 }
                ],
                zh: [
                    { name: 'Êñ∞Âä†Âù°', latitude: 1.3521, longitude: 103.8198 }
                ]
            },
            TH: {
                en: [
                    { name: 'Bangkok', latitude: 13.7563, longitude: 100.5018 },
                    { name: 'Phuket', latitude: 7.8804, longitude: 98.3923 }
                ],
                zh: [
                    { name: 'ÊõºË∞∑', latitude: 13.7563, longitude: 100.5018 },
                    { name: 'ÊôÆÂêâÂ≤õ', latitude: 7.8804, longitude: 98.3923 }
                ]
            },
            KR: {
                en: [
                    { name: 'Seoul', latitude: 37.5665, longitude: 126.9780 },
                    { name: 'Busan', latitude: 35.1796, longitude: 129.0756 },
                    { name: 'Incheon', latitude: 37.4563, longitude: 126.7052 },
                    { name: 'Jeju', latitude: 33.4996, longitude: 126.5312 },
                    { name: 'Daegu', latitude: 35.8714, longitude: 128.6014 },
                    { name: 'Daejeon', latitude: 36.3504, longitude: 127.3845 }
                ],
                zh: [
                    { name: 'È¶ñÂ∞î', latitude: 37.5665, longitude: 126.9780 },
                    { name: 'ÈáúÂ±±', latitude: 35.1796, longitude: 129.0756 },
                    { name: '‰ªÅÂ∑ù', latitude: 37.4563, longitude: 126.7052 },
                    { name: 'ÊµéÂ∑û', latitude: 33.4996, longitude: 126.5312 },
                    { name: 'Â§ßÈÇ±', latitude: 35.8714, longitude: 128.6014 },
                    { name: 'Â§ßÁî∞', latitude: 36.3504, longitude: 127.3845 }
                ]
            },
            CA: {
                en: [
                    { name: 'Toronto', latitude: 43.6532, longitude: -79.3832 },
                    { name: 'Vancouver', latitude: 49.2827, longitude: -123.1207 },
                    { name: 'Montreal', latitude: 45.5017, longitude: -73.5673 },
                    { name: 'Calgary', latitude: 51.0447, longitude: -114.0719 },
                    { name: 'Ottawa', latitude: 45.4215, longitude: -75.6972 },
                    { name: 'Edmonton', latitude: 53.5461, longitude: -113.4938 }
                ],
                zh: [
                    { name: 'Â§ö‰º¶Â§ö', latitude: 43.6532, longitude: -79.3832 },
                    { name: 'Ê∏©Âì•Âçé', latitude: 49.2827, longitude: -123.1207 },
                    { name: 'ËíôÁâπÂà©Â∞î', latitude: 45.5017, longitude: -73.5673 },
                    { name: 'Âç°Â∞îÂä†Èáå', latitude: 51.0447, longitude: -114.0719 },
                    { name: 'Ê∏•Â§™Âçé', latitude: 45.4215, longitude: -75.6972 },
                    { name: 'ÂüÉÂæ∑ËíôÈ°ø', latitude: 53.5461, longitude: -113.4938 }
                ]
            },
            ES: {
                en: [
                    { name: 'Madrid', latitude: 40.4168, longitude: -3.7038 },
                    { name: 'Barcelona', latitude: 41.3851, longitude: 2.1734 },
                    { name: 'Valencia', latitude: 39.4699, longitude: -0.3763 },
                    { name: 'Seville', latitude: 37.3891, longitude: -5.9845 },
                    { name: 'Malaga', latitude: 36.7213, longitude: -4.4217 },
                    { name: 'Bilbao', latitude: 43.2630, longitude: -2.9350 }
                ],
                zh: [
                    { name: 'È©¨Âæ∑Èáå', latitude: 40.4168, longitude: -3.7038 },
                    { name: 'Â∑¥Â°ûÁΩóÈÇ£', latitude: 41.3851, longitude: 2.1734 },
                    { name: 'Áì¶‰º¶Ë•ø‰∫ö', latitude: 39.4699, longitude: -0.3763 },
                    { name: 'Â°ûÁª¥Âà©‰∫ö', latitude: 37.3891, longitude: -5.9845 },
                    { name: 'È©¨ÊãâÂä†', latitude: 36.7213, longitude: -4.4217 },
                    { name: 'ÊØïÂ∞îÂ∑¥ÈÑÇ', latitude: 43.2630, longitude: -2.9350 }
                ]
            },
            PT: {
                en: [
                    { name: 'Lisbon', latitude: 38.7223, longitude: -9.1393 },
                    { name: 'Porto', latitude: 41.1579, longitude: -8.6291 },
                    { name: 'Faro', latitude: 37.0194, longitude: -7.9322 },
                    { name: 'Coimbra', latitude: 40.2033, longitude: -8.4103 }
                ],
                zh: [
                    { name: 'ÈáåÊñØÊú¨', latitude: 38.7223, longitude: -9.1393 },
                    { name: 'Ê≥¢Â∞îÂõæ', latitude: 41.1579, longitude: -8.6291 },
                    { name: 'Ê≥ïÈ≤Å', latitude: 37.0194, longitude: -7.9322 },
                    { name: 'ÁßëËã±Â∏ÉÊãâ', latitude: 40.2033, longitude: -8.4103 }
                ]
            },
            NL: {
                en: [
                    { name: 'Amsterdam', latitude: 52.3676, longitude: 4.9041 },
                    { name: 'Rotterdam', latitude: 51.9244, longitude: 4.4777 },
                    { name: 'The Hague', latitude: 52.0705, longitude: 4.3007 },
                    { name: 'Utrecht', latitude: 52.0907, longitude: 5.1214 },
                    { name: 'Eindhoven', latitude: 51.4416, longitude: 5.4697 }
                ],
                zh: [
                    { name: 'ÈòøÂßÜÊñØÁâπ‰∏π', latitude: 52.3676, longitude: 4.9041 },
                    { name: 'ÈπøÁâπ‰∏π', latitude: 51.9244, longitude: 4.4777 },
                    { name: 'Êµ∑Áâô', latitude: 52.0705, longitude: 4.3007 },
                    { name: '‰πåÁâπÂãíÊîØ', latitude: 52.0907, longitude: 5.1214 },
                    { name: 'ÂüÉÂõ†ÈúçÊ∏©', latitude: 51.4416, longitude: 5.4697 }
                ]
            },
            CH: {
                en: [
                    { name: 'Zurich', latitude: 47.3769, longitude: 8.5417 },
                    { name: 'Geneva', latitude: 46.2044, longitude: 6.1432 },
                    { name: 'Basel', latitude: 47.5596, longitude: 7.5886 },
                    { name: 'Bern', latitude: 46.9480, longitude: 7.4474 },
                    { name: 'Lausanne', latitude: 46.5197, longitude: 6.6323 }
                ],
                zh: [
                    { name: 'ËãèÈªé‰∏ñ', latitude: 47.3769, longitude: 8.5417 },
                    { name: 'Êó•ÂÜÖÁì¶', latitude: 46.2044, longitude: 6.1432 },
                    { name: 'Â∑¥Â°ûÂ∞î', latitude: 47.5596, longitude: 7.5886 },
                    { name: '‰ºØÂ∞îÂ∞º', latitude: 46.9480, longitude: 7.4474 },
                    { name: 'Ê¥õÊ°ë', latitude: 46.5197, longitude: 6.6323 }
                ]
            },
            SE: {
                en: [
                    { name: 'Stockholm', latitude: 59.3293, longitude: 18.0686 },
                    { name: 'Gothenburg', latitude: 57.7089, longitude: 11.9746 },
                    { name: 'Malmo', latitude: 55.6044, longitude: 13.0038 },
                    { name: 'Uppsala', latitude: 59.8586, longitude: 17.6389 }
                ],
                zh: [
                    { name: 'ÊñØÂæ∑Âì•Â∞îÊë©', latitude: 59.3293, longitude: 18.0686 },
                    { name: 'Âì•Âæ∑Â†°', latitude: 57.7089, longitude: 11.9746 },
                    { name: 'È©¨Â∞îÈªò', latitude: 55.6044, longitude: 13.0038 },
                    { name: '‰πåÊôÆËê®Êãâ', latitude: 59.8586, longitude: 17.6389 }
                ]
            },
            NO: {
                en: [
                    { name: 'Oslo', latitude: 59.9139, longitude: 10.7522 },
                    { name: 'Bergen', latitude: 60.3913, longitude: 5.3221 },
                    { name: 'Trondheim', latitude: 63.4305, longitude: 10.3951 },
                    { name: 'Stavanger', latitude: 58.9700, longitude: 5.7331 }
                ],
                zh: [
                    { name: 'Â••ÊñØÈôÜ', latitude: 59.9139, longitude: 10.7522 },
                    { name: 'ÂçëÂ∞îÊ†π', latitude: 60.3913, longitude: 5.3221 },
                    { name: 'ÁâπÈöÜËµ´ÂßÜ', latitude: 63.4305, longitude: 10.3951 },
                    { name: 'ÊñØÂ°î‰∏áÊ†º', latitude: 58.9700, longitude: 5.7331 }
                ]
            },
            NZ: {
                en: [
                    { name: 'Auckland', latitude: -36.8485, longitude: 174.7633 },
                    { name: 'Wellington', latitude: -41.2866, longitude: 174.7756 },
                    { name: 'Christchurch', latitude: -43.5320, longitude: 172.6306 },
                    { name: 'Hamilton', latitude: -37.7870, longitude: 175.2793 },
                    { name: 'Dunedin', latitude: -45.8788, longitude: 170.5028 }
                ],
                zh: [
                    { name: 'Â••ÂÖãÂÖ∞', latitude: -36.8485, longitude: 174.7633 },
                    { name: 'ÊÉ†ÁÅµÈ°ø', latitude: -41.2866, longitude: 174.7756 },
                    { name: 'Âü∫Áù£Âüé', latitude: -43.5320, longitude: 172.6306 },
                    { name: 'Ê±âÂØÜÂ∞îÈ°ø', latitude: -37.7870, longitude: 175.2793 },
                    { name: '‰ΩÜÂ∞º‰∏Å', latitude: -45.8788, longitude: 170.5028 }
                ]
            },
            AE: {
                en: [
                    { name: 'Dubai', latitude: 25.2048, longitude: 55.2708 },
                    { name: 'Abu Dhabi', latitude: 24.4539, longitude: 54.3773 },
                    { name: 'Sharjah', latitude: 25.3573, longitude: 55.4033 },
                    { name: 'Ajman', latitude: 25.4052, longitude: 55.5136 },
                    { name: 'Ras Al Khaimah', latitude: 25.7895, longitude: 55.9432 }
                ],
                zh: [
                    { name: 'Ëø™Êãú', latitude: 25.2048, longitude: 55.2708 },
                    { name: 'ÈòøÂ∏ÉÊâéÊØî', latitude: 24.4539, longitude: 54.3773 },
                    { name: 'Ê≤ôËø¶', latitude: 25.3573, longitude: 55.4033 },
                    { name: 'ÈòøÊ≤ªÊõº', latitude: 25.4052, longitude: 55.5136 },
                    { name: 'Âìà‰ºäÈ©¨Ëßí', latitude: 25.7895, longitude: 55.9432 }
                ]
            },
            RU: {
                en: [
                    { name: 'Moscow', latitude: 55.7558, longitude: 37.6173 },
                    { name: 'Saint Petersburg', latitude: 59.9343, longitude: 30.3351 },
                    { name: 'Novosibirsk', latitude: 55.0084, longitude: 82.9357 },
                    { name: 'Yekaterinburg', latitude: 56.8389, longitude: 60.6057 },
                    { name: 'Kazan', latitude: 55.7887, longitude: 49.1221 }
                ],
                zh: [
                    { name: 'Ëé´ÊñØÁßë', latitude: 55.7558, longitude: 37.6173 },
                    { name: 'Âú£ÂΩºÂæóÂ†°', latitude: 59.9343, longitude: 30.3351 },
                    { name: 'Êñ∞Ë•ø‰ºØÂà©‰∫ö', latitude: 55.0084, longitude: 82.9357 },
                    { name: 'Âè∂Âç°Êç∑Áê≥Â†°', latitude: 56.8389, longitude: 60.6057 },
                    { name: 'ÂñÄÂ±±', latitude: 55.7887, longitude: 49.1221 }
                ]
            },
            BR: {
                en: [
                    { name: 'Sao Paulo', latitude: -23.5505, longitude: -46.6333 },
                    { name: 'Rio de Janeiro', latitude: -22.9068, longitude: -43.1729 },
                    { name: 'Brasilia', latitude: -15.7975, longitude: -47.8919 },
                    { name: 'Salvador', latitude: -12.9714, longitude: -38.5014 },
                    { name: 'Fortaleza', latitude: -3.7319, longitude: -38.5267 }
                ],
                zh: [
                    { name: 'Âú£‰øùÁΩó', latitude: -23.5505, longitude: -46.6333 },
                    { name: 'ÈáåÁ∫¶ÁÉ≠ÂÜÖÂç¢', latitude: -22.9068, longitude: -43.1729 },
                    { name: 'Â∑¥Ë•øÂà©‰∫ö', latitude: -15.7975, longitude: -47.8919 },
                    { name: 'Ëê®Â∞îÁì¶Â§ö', latitude: -12.9714, longitude: -38.5014 },
                    { name: 'Á¶èÂ°îËé±Ëê®', latitude: -3.7319, longitude: -38.5267 }
                ]
            },
            IN: {
                en: [
                    { name: 'New Delhi', latitude: 28.6139, longitude: 77.2090 },
                    { name: 'Mumbai', latitude: 19.0760, longitude: 72.8777 },
                    { name: 'Bangalore', latitude: 12.9716, longitude: 77.5946 },
                    { name: 'Chennai', latitude: 13.0827, longitude: 80.2707 },
                    { name: 'Kolkata', latitude: 22.5726, longitude: 88.3639 }
                ],
                zh: [
                    { name: 'Êñ∞Âæ∑Èáå', latitude: 28.6139, longitude: 77.2090 },
                    { name: 'Â≠ü‰π∞', latitude: 19.0760, longitude: 72.8777 },
                    { name: 'Áè≠Âä†ÁΩóÂ∞î', latitude: 12.9716, longitude: 77.5946 },
                    { name: 'ÈáëÂ•à', latitude: 13.0827, longitude: 80.2707 },
                    { name: 'Âä†Â∞îÂêÑÁ≠î', latitude: 22.5726, longitude: 88.3639 }
                ]
            },
            MX: {
                en: [
                    { name: 'Mexico City', latitude: 19.4326, longitude: -99.1332 },
                    { name: 'Guadalajara', latitude: 20.6597, longitude: -103.3496 },
                    { name: 'Monterrey', latitude: 25.6866, longitude: -100.3161 },
                    { name: 'Cancun', latitude: 21.1619, longitude: -86.8515 },
                    { name: 'Tijuana', latitude: 32.5149, longitude: -117.0382 }
                ],
                zh: [
                    { name: 'Â¢®Ë•øÂì•Âüé', latitude: 19.4326, longitude: -99.1332 },
                    { name: 'ÁìúËææÊãâÂìàÊãâ', latitude: 20.6597, longitude: -103.3496 },
                    { name: 'ËíôÁâπÈõ∑', latitude: 25.6866, longitude: -100.3161 },
                    { name: 'ÂùéÊòÜ', latitude: 21.1619, longitude: -86.8515 },
                    { name: 'ËíÇÂçéÁ∫≥', latitude: 32.5149, longitude: -117.0382 }
                ]
            },
            AR: {
                en: [
                    { name: 'Buenos Aires', latitude: -34.6037, longitude: -58.3816 },
                    { name: 'Cordoba', latitude: -31.4201, longitude: -64.1888 },
                    { name: 'Rosario', latitude: -32.9468, longitude: -60.6393 },
                    { name: 'Mendoza', latitude: -32.8908, longitude: -68.8272 },
                    { name: 'Mar del Plata', latitude: -38.0055, longitude: -57.5426 }
                ],
                zh: [
                    { name: 'Â∏ÉÂÆúËØ∫ÊñØËâæÂà©ÊñØ', latitude: -34.6037, longitude: -58.3816 },
                    { name: 'ÁßëÂ∞îÂ§öÁì¶', latitude: -31.4201, longitude: -64.1888 },
                    { name: 'ÁΩóËê®ÈáåÂ••', latitude: -32.9468, longitude: -60.6393 },
                    { name: 'Èó®Â§öËê®', latitude: -32.8908, longitude: -68.8272 },
                    { name: 'È©¨Âæ∑ÊôÆÊãâÂ°î', latitude: -38.0055, longitude: -57.5426 }
                ]
            },
            ZA: {
                en: [
                    { name: 'Cape Town', latitude: -33.9249, longitude: 18.4241 },
                    { name: 'Johannesburg', latitude: -26.2041, longitude: 28.0473 },
                    { name: 'Durban', latitude: -29.8587, longitude: 31.0218 },
                    { name: 'Pretoria', latitude: -25.7461, longitude: 28.1881 },
                    { name: 'Port Elizabeth', latitude: -33.7139, longitude: 25.5207 }
                ],
                zh: [
                    { name: 'ÂºÄÊôÆÊï¶', latitude: -33.9249, longitude: 18.4241 },
                    { name: 'Á∫¶Áø∞ÂÜÖÊñØÂ†°', latitude: -26.2041, longitude: 28.0473 },
                    { name: 'Âæ∑Áè≠', latitude: -29.8587, longitude: 31.0218 },
                    { name: 'ÊØîÂãíÈôÄÂà©‰∫ö', latitude: -25.7461, longitude: 28.1881 },
                    { name: '‰ºä‰∏ΩËééÁôΩÊ∏Ø', latitude: -33.7139, longitude: 25.5207 }
                ]
            },
            EG: {
                en: [
                    { name: 'Cairo', latitude: 30.0444, longitude: 31.2357 },
                    { name: 'Alexandria', latitude: 31.2001, longitude: 29.9187 },
                    { name: 'Giza', latitude: 30.0131, longitude: 31.2089 },
                    { name: 'Luxor', latitude: 25.6872, longitude: 32.6396 },
                    { name: 'Aswan', latitude: 24.0889, longitude: 32.8998 }
                ],
                zh: [
                    { name: 'ÂºÄÁΩó', latitude: 30.0444, longitude: 31.2357 },
                    { name: '‰∫öÂéÜÂ±±Â§ß', latitude: 31.2001, longitude: 29.9187 },
                    { name: 'ÂêâËê®', latitude: 30.0131, longitude: 31.2089 },
                    { name: 'Âç¢ÂÖãÁ¥¢', latitude: 25.6872, longitude: 32.6396 },
                    { name: 'ÈòøÊñØÊó∫', latitude: 24.0889, longitude: 32.8998 }
                ]
            },
            GR: {
                en: [
                    { name: 'Athens', latitude: 37.9838, longitude: 23.7275 },
                    { name: 'Thessaloniki', latitude: 40.6401, longitude: 22.9444 },
                    { name: 'Heraklion', latitude: 35.3387, longitude: 25.1442 },
                    { name: 'Rhodes', latitude: 36.4341, longitude: 28.2176 },
                    { name: 'Patras', latitude: 38.2466, longitude: 21.7346 }
                ],
                zh: [
                    { name: 'ÈõÖÂÖ∏', latitude: 37.9838, longitude: 23.7275 },
                    { name: 'Â°ûËê®Ê¥õÂ∞ºÂü∫', latitude: 40.6401, longitude: 22.9444 },
                    { name: '‰ºäÊãâÂÖãÂà©ÁøÅ', latitude: 35.3387, longitude: 25.1442 },
                    { name: 'ÁΩóÂæ∑Â≤õ', latitude: 36.4341, longitude: 28.2176 },
                    { name: 'Â∏ïÁâπÈõ∑', latitude: 38.2466, longitude: 21.7346 }
                ]
            },
            TR: {
                en: [
                    { name: 'Istanbul', latitude: 41.0082, longitude: 28.9784 },
                    { name: 'Ankara', latitude: 39.9334, longitude: 32.8597 },
                    { name: 'Izmir', latitude: 38.4237, longitude: 27.1428 },
                    { name: 'Antalya', latitude: 36.8969, longitude: 30.7133 },
                    { name: 'Bursa', latitude: 40.1885, longitude: 29.0610 }
                ],
                zh: [
                    { name: '‰ºäÊñØÂù¶Â∏ÉÂ∞î', latitude: 41.0082, longitude: 28.9784 },
                    { name: 'ÂÆâÂç°Êãâ', latitude: 39.9334, longitude: 32.8597 },
                    { name: '‰ºäÂÖπÂØÜÂ∞î', latitude: 38.4237, longitude: 27.1428 },
                    { name: 'ÂÆâÂ°îÂà©‰∫ö', latitude: 36.8969, longitude: 30.7133 },
                    { name: 'Â∏ÉÂ∞îËê®', latitude: 40.1885, longitude: 29.0610 }
                ]
            },
            AT: {
                en: [
                    { name: 'Vienna', latitude: 48.2082, longitude: 16.3738 },
                    { name: 'Salzburg', latitude: 47.8095, longitude: 13.0550 },
                    { name: 'Innsbruck', latitude: 47.2692, longitude: 11.4041 },
                    { name: 'Graz', latitude: 47.0707, longitude: 15.4395 },
                    { name: 'Linz', latitude: 48.3069, longitude: 14.2858 }
                ],
                zh: [
                    { name: 'Áª¥‰πüÁ∫≥', latitude: 48.2082, longitude: 16.3738 },
                    { name: 'Ëê®Â∞îËå®Â†°', latitude: 47.8095, longitude: 13.0550 },
                    { name: 'Âõ†ÊñØÂ∏ÉÈ≤ÅÂÖã', latitude: 47.2692, longitude: 11.4041 },
                    { name: 'Ê†ºÊãâËå®', latitude: 47.0707, longitude: 15.4395 },
                    { name: 'ÊûóËå®', latitude: 48.3069, longitude: 14.2858 }
                ]
            },
            BE: {
                en: [
                    { name: 'Brussels', latitude: 50.8503, longitude: 4.3517 },
                    { name: 'Antwerp', latitude: 51.2194, longitude: 4.4025 },
                    { name: 'Ghent', latitude: 51.0543, longitude: 3.7174 },
                    { name: 'Bruges', latitude: 51.2093, longitude: 3.2247 },
                    { name: 'Liege', latitude: 50.6326, longitude: 5.5797 }
                ],
                zh: [
                    { name: 'Â∏ÉÈ≤ÅÂ°ûÂ∞î', latitude: 50.8503, longitude: 4.3517 },
                    { name: 'ÂÆâÁâπÂç´ÊôÆ', latitude: 51.2194, longitude: 4.4025 },
                    { name: 'Ê†πÁâπ', latitude: 51.0543, longitude: 3.7174 },
                    { name: 'Â∏ÉÈ≤ÅÊó•', latitude: 51.2093, longitude: 3.2247 },
                    { name: 'ÂàóÊó•', latitude: 50.6326, longitude: 5.5797 }
                ]
            },
            DK: {
                en: [
                    { name: 'Copenhagen', latitude: 55.6761, longitude: 12.5683 },
                    { name: 'Aarhus', latitude: 56.1567, longitude: 10.2108 },
                    { name: 'Odense', latitude: 55.4038, longitude: 10.4024 },
                    { name: 'Aalborg', latitude: 57.0488, longitude: 9.9217 },
                    { name: 'Esbjerg', latitude: 55.4768, longitude: 8.4595 }
                ],
                zh: [
                    { name: 'Âì•Êú¨ÂìàÊ†π', latitude: 55.6761, longitude: 12.5683 },
                    { name: 'Â••ËÉ°ÊñØ', latitude: 56.1567, longitude: 10.2108 },
                    { name: 'Ê¨ßÁôªÂ°û', latitude: 55.4038, longitude: 10.4024 },
                    { name: 'Â••Â∞îÂ†°', latitude: 57.0488, longitude: 9.9217 },
                    { name: 'ÂüÉÊñØÊØîÁ∫¶', latitude: 55.4768, longitude: 8.4595 }
                ]
            },
            FI: {
                en: [
                    { name: 'Helsinki', latitude: 60.1699, longitude: 24.9384 },
                    { name: 'Tampere', latitude: 61.4978, longitude: 23.7610 },
                    { name: 'Turku', latitude: 60.4518, longitude: 22.2666 },
                    { name: 'Oulu', latitude: 65.0121, longitude: 25.4651 },
                    { name: 'Espoo', latitude: 60.2055, longitude: 24.6559 }
                ],
                zh: [
                    { name: 'Ëµ´Â∞îËæõÂü∫', latitude: 60.1699, longitude: 24.9384 },
                    { name: 'Âù¶‰Ω©Èõ∑', latitude: 61.4978, longitude: 23.7610 },
                    { name: 'ÂõæÂ∞îÂ∫ì', latitude: 60.4518, longitude: 22.2666 },
                    { name: 'Â••Âç¢', latitude: 65.0121, longitude: 25.4651 },
                    { name: 'ÂüÉÊñØÊ≥¢', latitude: 60.2055, longitude: 24.6559 }
                ]
            },
            IE: {
                en: [
                    { name: 'Dublin', latitude: 53.3498, longitude: -6.2603 },
                    { name: 'Cork', latitude: 51.8985, longitude: -8.4756 },
                    { name: 'Galway', latitude: 53.2707, longitude: -9.0568 },
                    { name: 'Limerick', latitude: 52.6638, longitude: -8.6267 },
                    { name: 'Waterford', latitude: 52.2593, longitude: -7.1192 }
                ],
                zh: [
                    { name: 'ÈÉΩÊüèÊûó', latitude: 53.3498, longitude: -6.2603 },
                    { name: 'ÁßëÂÖã', latitude: 51.8985, longitude: -8.4756 },
                    { name: 'ÊààÂ∞îÈü¶', latitude: 53.2707, longitude: -9.0568 },
                    { name: 'Âà©ÈªòÈáåÂÖã', latitude: 52.6638, longitude: -8.6267 },
                    { name: 'Ê≤ÉÁâπÁ¶èÂæ∑', latitude: 52.2593, longitude: -7.1192 }
                ]
            },
            IL: {
                en: [
                    { name: 'Jerusalem', latitude: 31.7683, longitude: 35.2137 },
                    { name: 'Tel Aviv', latitude: 32.0853, longitude: 34.7818 },
                    { name: 'Haifa', latitude: 32.7940, longitude: 34.9896 },
                    { name: 'Eilat', latitude: 29.5577, longitude: 34.9519 },
                    { name: 'Beer Sheva', latitude: 31.2518, longitude: 34.7913 }
                ],
                zh: [
                    { name: 'ËÄ∂Ë∑ØÊííÂÜ∑', latitude: 31.7683, longitude: 35.2137 },
                    { name: 'ÁâπÊãâÁª¥Â§´', latitude: 32.0853, longitude: 34.7818 },
                    { name: 'Êµ∑Ê≥ï', latitude: 32.7940, longitude: 34.9896 },
                    { name: 'ÂüÉÊãâÁâπ', latitude: 29.5577, longitude: 34.9519 },
                    { name: 'Ë¥ùÂ∞îË∞¢Â∑¥', latitude: 31.2518, longitude: 34.7913 }
                ]
            }
        };

        // Êõ¥Êñ∞Â∏∏Áî®ÂõΩÂÆ∂ÂàóË°®
        const popularCountries = {
            en: [
                { code: 'CN', name: 'China' },
                { code: 'JP', name: 'Japan' },
                { code: 'US', name: 'United States' },
                { code: 'GB', name: 'United Kingdom' },
                { code: 'FR', name: 'France' },
                { code: 'IT', name: 'Italy' },
                { code: 'DE', name: 'Germany' },
                { code: 'AU', name: 'Australia' },
                { code: 'SG', name: 'Singapore' },
                { code: 'TH', name: 'Thailand' },
                { code: 'KR', name: 'South Korea' },
                { code: 'CA', name: 'Canada' },
                { code: 'ES', name: 'Spain' },
                { code: 'PT', name: 'Portugal' },
                { code: 'NL', name: 'Netherlands' },
                { code: 'CH', name: 'Switzerland' },
                { code: 'SE', name: 'Sweden' },
                { code: 'NO', name: 'Norway' },
                { code: 'NZ', name: 'New Zealand' },
                { code: 'AE', name: 'United Arab Emirates' },
                { code: 'RU', name: 'Russia' },
                { code: 'BR', name: 'Brazil' },
                { code: 'IN', name: 'India' },
                { code: 'MX', name: 'Mexico' },
                { code: 'AR', name: 'Argentina' },
                { code: 'ZA', name: 'South Africa' },
                { code: 'EG', name: 'Egypt' },
                { code: 'GR', name: 'Greece' },
                { code: 'TR', name: 'Turkey' },
                { code: 'AT', name: 'Austria' },
                { code: 'BE', name: 'Belgium' },
                { code: 'DK', name: 'Denmark' },
                { code: 'FI', name: 'Finland' },
                { code: 'IE', name: 'Ireland' },
                { code: 'IL', name: 'Israel' }
            ],
            zh: [
                { code: 'CN', name: '‰∏≠ÂõΩ' },
                { code: 'JP', name: 'Êó•Êú¨' },
                { code: 'US', name: 'ÁæéÂõΩ' },
                { code: 'GB', name: 'Ëã±ÂõΩ' },
                { code: 'FR', name: 'Ê≥ïÂõΩ' },
                { code: 'IT', name: 'ÊÑèÂ§ßÂà©' },
                { code: 'DE', name: 'Âæ∑ÂõΩ' },
                { code: 'AU', name: 'Êæ≥Â§ßÂà©‰∫ö' },
                { code: 'SG', name: 'Êñ∞Âä†Âù°' },
                { code: 'TH', name: 'Ê≥∞ÂõΩ' },
                { code: 'KR', name: 'Èü©ÂõΩ' },
                { code: 'CA', name: 'Âä†ÊãøÂ§ß' },
                { code: 'ES', name: 'Ë•øÁè≠Áâô' },
                { code: 'PT', name: 'Ëë°ËêÑÁâô' },
                { code: 'NL', name: 'Ëç∑ÂÖ∞' },
                { code: 'CH', name: 'ÁëûÂ£´' },
                { code: 'SE', name: 'ÁëûÂÖ∏' },
                { code: 'NO', name: 'Êå™Â®Å' },
                { code: 'NZ', name: 'Êñ∞Ë•øÂÖ∞' },
                { code: 'AE', name: 'ÈòøËÅîÈÖã' },
                { code: 'RU', name: '‰øÑÁΩóÊñØ' },
                { code: 'BR', name: 'Â∑¥Ë•ø' },
                { code: 'IN', name: 'Âç∞Â∫¶' },
                { code: 'MX', name: 'Â¢®Ë•øÂì•' },
                { code: 'AR', name: 'ÈòøÊ†πÂª∑' },
                { code: 'ZA', name: 'ÂçóÈùû' },
                { code: 'EG', name: 'ÂüÉÂèä' },
                { code: 'GR', name: 'Â∏åËÖä' },
                { code: 'TR', name: 'ÂúüËÄ≥ÂÖ∂' },
                { code: 'AT', name: 'Â••Âú∞Âà©' },
                { code: 'BE', name: 'ÊØîÂà©Êó∂' },
                { code: 'DK', name: '‰∏πÈ∫¶' },
                { code: 'FI', name: 'Ëä¨ÂÖ∞' },
                { code: 'IE', name: 'Áà±Â∞îÂÖ∞' },
                { code: 'IL', name: '‰ª•Ëâ≤Âàó' }
            ]
        };

        // ÂΩìÂâçÈÄâÊã©ÁöÑÁä∂ÊÄÅ
        const currentSelection = {
            en: { country: null, city: null, date: null },
            zh: { country: null, city: null, date: null }
        };

        // ÂΩìÂâçËØ≠Ë®Ä
        let currentLang = 'zh';

        // Open-Meteo API ÈÖçÁΩÆ
        const OPEN_METEO_API = {
            WEATHER: 'https://api.open-meteo.com/v1',
            GEO: 'https://geocoding-api.open-meteo.com/v1'
        };

        let refreshTimer = null; // Ê∑ªÂä†ÂÆöÊó∂Âô®ÂèòÈáè
        
        // Ê∑ªÂä†Ê∏ÖÁêÜÂáΩÊï∞
        function cleanup() {
            if (refreshTimer) {
                clearInterval(refreshTimer);
                refreshTimer = null;
            }
        }

        // È°µÈù¢Âç∏ËΩΩÊó∂Ê∏ÖÁêÜ
        window.addEventListener('beforeunload', cleanup);

        // ÊîπËøõËá™Âä®Âà∑Êñ∞ÂáΩÊï∞
        function startAutoRefresh() {
            // Ê∏ÖÁêÜÂ∑≤Â≠òÂú®ÁöÑÂÆöÊó∂Âô®
            cleanup();
            
            // ËÆæÁΩÆÊñ∞ÁöÑÂÆöÊó∂Âô® (15ÂàÜÈíüÂà∑Êñ∞‰∏ÄÊ¨°)
            refreshTimer = setInterval(() => {
                const currentCity = currentSelection[currentLang].city;
                if (currentCity) {
                    getWeatherData(currentCity.lat, currentCity.lon, currentLang);
                }
            }, 15 * 60 * 1000);
        }

        // ÊâãÂä®Âà∑Êñ∞ÂáΩÊï∞
        async function manualRefresh() {
            const refreshButton = document.querySelector('.refresh-button');
            if (!refreshButton || refreshButton.disabled) return;

            refreshButton.disabled = true;
            refreshButton.classList.add('rotating');

            const currentCity = currentSelection[currentLang].city;
            if (currentCity) {
                await getWeatherData(currentCity.lat, currentCity.lon, currentLang);
            }

            setTimeout(() => {
                refreshButton.disabled = false;
                refreshButton.classList.remove('rotating');
            }, 2000);
        }

        // ‰ºòÂåñËØ≠Ë®ÄÂàùÂßãÂåñ
        function initializeLanguage() {
            const savedLang = localStorage.getItem('preferred_language') || 'zh';
            currentLang = savedLang;
            
            // Êõ¥Êñ∞ËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('onclick').includes(savedLang));
            });

            // Êõ¥Êñ∞ÁïåÈù¢ÊñáÊú¨
            updateInterfaceText(currentLang);
        }

        // ‰ºòÂåñÁïåÈù¢ÊñáÊú¨Êõ¥Êñ∞
        function updateInterfaceText(lang) {
            // Êõ¥Êñ∞Ê†áÈ¢òÂíåÂÖ∂‰ªñÊñáÊú¨
            document.querySelector('.app-title').textContent = translations[lang].appTitle;
            document.querySelector('.app-subtitle').textContent = translations[lang].appSubtitle;
            document.querySelector('.app-instruction').textContent = translations[lang].appInstruction;
            
            // Êõ¥Êñ∞ÂØºËà™Ê†áÈ¢ò
            document.querySelector('#country-title .nav-text').textContent = 
                lang === 'zh' ? 'ÈÄâÊã©ÂõΩÂÆ∂' : 'Select Country';
            document.querySelector('#city-title .nav-text').textContent = 
                lang === 'zh' ? 'ÈÄâÊã©ÂüéÂ∏Ç' : 'Select City';
            document.querySelector('#date-title .nav-text').textContent = 
                lang === 'zh' ? 'ÈÄâÊã©Êó•Êúü' : 'Select Date';

            // Êõ¥Êñ∞ÊêúÁ¥¢Ê°ÜÂç†‰ΩçÁ¨¶
            const countrySearch = document.querySelector('#country-list .search-box');
            const citySearch = document.querySelector('#city-list .search-box');
            if (countrySearch) {
                countrySearch.placeholder = lang === 'zh' ? 'ÊêúÁ¥¢ÂõΩÂÆ∂...' : 'Search country...';
            }
            if (citySearch) {
                citySearch.placeholder = lang === 'zh' ? 'ÊêúÁ¥¢ÂüéÂ∏Ç...' : 'Search city...';
            }

            // ÈáçÊñ∞Ê∏≤ÊüìÂõΩÂÆ∂ÂàóË°®
            renderCountryList(lang);

            // Â¶ÇÊûúÂ∑≤ÁªèÈÄâÊã©‰∫ÜÂüéÂ∏ÇÔºåÊõ¥Êñ∞Â§©Ê∞î‰ø°ÊÅØ
            const currentCity = currentSelection[lang]?.city;
            if (currentCity) {
                getWeatherData(currentCity.lat, currentCity.lon, lang);
            }
        }

        // ‰ºòÂåñÊúÄËøëÂüéÂ∏ÇÂä†ËΩΩ
        function loadRecentCities() {
            try {
                const recentCities = JSON.parse(localStorage.getItem('recentCities')) || [];
                if (recentCities.length > 0) {
                    const city = recentCities[0];
                    if (city.lat && city.lon) {
                        getWeatherData(city.lat, city.lon, currentLang);
                    }
                }
            } catch (error) {
                console.error('Error loading recent cities:', error);
            }
        }

        // ‰ºòÂåñÂ§©Ê∞îÊï∞ÊçÆËé∑Âèñ
        async function getWeatherData(lat, lon, lang) {
            // Ê£ÄÊü•ÁºìÂ≠ò
            const cachedData = WeatherCache.get(lat, lon);
            if (cachedData) {
                requestAnimationFrame(() => {
                    showWeatherInfo(cachedData, 0, lang);
                    generateOutfitRecommendations(cachedData, 0, lang);
                });
                return;
            }
            
            try {
                const weatherUrl = `${OPEN_METEO_API.WEATHER}/forecast?latitude=${lat}&longitude=${lon}`
                    + `&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,weather_code,wind_speed_10m`
                    + `&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,wind_speed_10m_max`
                    + `&current_weather=true&timezone=auto&forecast_days=7`;

                const response = await fetchWithRetry(weatherUrl);
                if (!response.ok) throw new Error(`API Error: ${response.status}`);

                const data = await response.json();
                if (!data || !data.current_weather || !data.daily || !data.hourly) {
                    throw new Error('Invalid data structure');
                }

                const weatherData = processWeatherData(data, lang);
                WeatherCache.set(lat, lon, weatherData);

                requestAnimationFrame(() => {
                    showWeatherInfo(weatherData, 0, lang);
                    generateOutfitRecommendations(weatherData, 0, lang);
                });

                startAutoRefresh();
        } catch (error) {
                handleWeatherError(error, lang);
            }
        }

        // ‰ºòÂåñÂ§©Ê∞îÊï∞ÊçÆÂ§ÑÁêÜ
        function processWeatherData(data, lang) {
            const currentHourIndex = new Date().getHours();
            
            // Á°Æ‰øùÊâÄÊúâÊï∞ÊçÆÈÉΩÊúâÈªòËÆ§ÂÄºÔºåÁâπÂà´Ê≥®ÊÑèÈ£éÈÄüÊï∞ÊçÆÁöÑÂ§ÑÁêÜ
            const current = {
                temp: data.current_weather?.temperature ?? '--',
                feels_like: data.hourly?.temperature_2m?.[currentHourIndex] ?? '--',
                humidity: data.hourly?.relative_humidity_2m?.[currentHourIndex] ?? '--',
                wind_speed: data.current_weather?.windspeed ?? '--',  // ‰øÆÊîπËøôÈáåÔºå‰ΩøÁî® windspeed ËÄå‰∏çÊòØ wind_speed
                weather_code: data.current_weather?.weathercode ?? 0,  // ‰ΩøÁî® weathercode
                last_update: new Date().toLocaleTimeString(lang === 'zh' ? 'zh-CN' : 'en-US')
            };

            // Ê∑ªÂä†Êï∞ÊçÆÈ™åËØÅÂíåÈªòËÆ§ÂÄº
            return {
                current,
                daily: {
                    temperature_2m_max: data.daily?.temperature_2m_max || Array(7).fill('--'),
                    temperature_2m_min: data.daily?.temperature_2m_min || Array(7).fill('--'),
                    weather_code: data.daily?.weathercode || Array(7).fill(0),  // ‰ΩøÁî® weathercode
                    precipitation_probability_max: data.daily?.precipitation_probability_max || Array(7).fill('--'),
                    wind_speed_10m_max: data.daily?.wind_speed_10m_max || Array(7).fill('--')
                },
                hourly: {
                    temperature: (data.hourly?.temperature_2m || Array(24).fill('--')).slice(0, 24),
                    humidity: (data.hourly?.relative_humidity_2m || Array(24).fill('--')).slice(0, 24),
                    precipitation_probability: (data.hourly?.precipitation_probability || Array(24).fill('--')).slice(0, 24),
                    weather_code: (data.hourly?.weathercode || Array(24).fill(0)).slice(0, 24),  // ‰ΩøÁî® weathercode
                    wind_speed: (data.hourly?.windspeed_10m || Array(24).fill('--')).slice(0, 24)  // ‰ΩøÁî® windspeed_10m
                }
            };
        }

        // ‰ºòÂåñÈîôËØØÂ§ÑÁêÜ
        function handleWeatherError(error, lang) {
            console.error('Error fetching weather data:', error);
            
            let errorType = ErrorTypes.NETWORK;
            let errorMessage = translations[lang].networkError;

            if (error.message === 'Request timeout') {
                errorType = ErrorTypes.TIMEOUT;
                errorMessage = translations[lang].timeoutError || 'Request timed out. Please try again.';
            } else if (error.message.includes('API Error')) {
                errorType = ErrorTypes.API;
                errorMessage = translations[lang].apiError || 'Weather service error. Please try again later.';
            } else if (error.message === 'Invalid data structure') {
                errorType = ErrorTypes.INVALID_DATA;
                errorMessage = translations[lang].dataError || 'Invalid weather data received.';
            }

            showError(errorMessage, errorType);
        }

        // ÈîôËØØÁ±ªÂûãÂÆö‰πâ
        const ErrorTypes = {
            NETWORK: 'network',
            TIMEOUT: 'timeout',
            API: 'api',
            INVALID_DATA: 'invalid_data'
        };

        // ÊîπËøõÈîôËØØÊòæÁ§∫ÂáΩÊï∞
        function showError(message, type = ErrorTypes.NETWORK) {
            const errorContainer = document.getElementById('error-container');
            if (!errorContainer) return;

            const errorClass = `error-${type}`;
            errorContainer.className = `error-message ${errorClass}`;
            errorContainer.textContent = message;
            errorContainer.style.display = 'block';

            // 5ÁßíÂêéËá™Âä®ÈöêËóè
            setTimeout(() => {
                errorContainer.style.display = 'none';
            }, 5000);
        }

        // Ê∑ªÂä†Ë∂ÖÊó∂ÊéßÂà∂ÁöÑfetchÂáΩÊï∞
        async function fetchWithTimeout(url, timeout = 10000) {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), timeout);

            try {
                const response = await fetch(url, {
                    signal: controller.signal
                });
                clearTimeout(timeoutId);
                return response;
            } catch (error) {
                clearTimeout(timeoutId);
                if (error.name === 'AbortError') {
                    throw new Error('Request timeout');
                }
                throw error;
            }
        }

        function getWeatherEmoji(weather) {
            const weatherMap = {
                'clear': '‚òÄÔ∏è',
                'clouds': '‚õÖ',
                'rain': 'üåß',
                'snow': '‚ùÑÔ∏è',
                'thunderstorm': '‚õà',
                'drizzle': 'üå¶',
                'mist': 'üå´',
                'fog': 'üå´'
            };
            return weatherMap[weather.toLowerCase()] || 'üå§';
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp * 1000);
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return `${days[date.getDay()]}, ${months[date.getMonth()]} ${date.getDate()}`;
        }

        function getOutfitTip(temp, lang) {
            const t = translations[lang].outfitTips;
            if (temp < 10) return t.cold;
            if (temp < 20) return t.mild;
            return t.warm;
        }

        // ‰øùÂ≠òÊúÄËøë‰ΩøÁî®ÁöÑÂüéÂ∏Ç
        function saveRecentCity(city, lang) {
            const recentCities = JSON.parse(localStorage.getItem('recentCities') || '{}');
            recentCities[lang] = city;
            localStorage.setItem('recentCities', JSON.stringify(recentCities));
        }

        // ÂàùÂßãÂåñÈ°µÈù¢
        function initializePage() {
            // Ê∏≤ÊüìÂõΩÂÆ∂ÂàóË°®
            renderCountryList(currentLang);
        }

        // Ê∑ªÂä†ÊêúÁ¥¢ËøáÊª§ÂäüËÉΩ
        function filterList(input, listId) {
            const filter = input.value.toLowerCase();
            const list = document.querySelector(`#${listId} .nav-items`);
            const items = list.getElementsByClassName('nav-item');
            
            for (let item of items) {
                const text = item.textContent || item.innerText;
                if (text.toLowerCase().indexOf(filter) > -1) {
                    item.style.display = "";
                } else {
                    item.style.display = "none";
                }
            }
        }

        // Êõ¥Êñ∞Ê∏≤ÊüìÂõΩÂÆ∂ÂàóË°®ÂáΩÊï∞
        function renderCountryList(lang) {
            const countryList = document.getElementById('country-list');
            if (!countryList) return;

            const itemsContainer = countryList.querySelector('.nav-items');
            if (!itemsContainer) return;

            // Ê∏ÖÈô§‰πãÂâçÁöÑ‰∫ã‰ª∂ÁõëÂê¨
            const newItemsContainer = itemsContainer.cloneNode(true);
            itemsContainer.parentNode.replaceChild(newItemsContainer, itemsContainer);
            
            newItemsContainer.innerHTML = popularCountries[lang]
                .map(country => `
                    <div class="nav-item" data-code="${country.code}">
                        ${country.name}
                </div>
                `).join('');

            // Ê∑ªÂä†ÂõΩÂÆ∂ÈÄâÊã©‰∫ã‰ª∂ÁõëÂê¨
            newItemsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('nav-item')) {
                    selectCountry(e.target.dataset.code, e.target.textContent, lang);
                }
            });
        }

        // Êõ¥Êñ∞ÈÄâÊã©ÂõΩÂÆ∂ÂáΩÊï∞
        async function selectCountry(countryCode, countryName, lang) {
            try {
                currentSelection[lang].country = { code: countryCode, name: countryName };
                
                // Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÂÄº
                const countryTitle = document.getElementById('country-title');
                const selectedValue = countryTitle.querySelector('.selected-value') || document.createElement('div');
                selectedValue.className = 'selected-value';
                selectedValue.textContent = countryName;
                if (!countryTitle.querySelector('.selected-value')) {
                    countryTitle.appendChild(selectedValue);
                }

                // ÈöêËóèÂõΩÂÆ∂ÂàóË°®
                const countryList = document.getElementById('country-list');
                countryList.classList.remove('show');
                countryTitle.classList.remove('active');
                
                // ‰ΩøÁî®È¢ÑËÆæÁöÑÁÉ≠Èó®ÂüéÂ∏ÇÊï∞ÊçÆ
                if (popularCities[countryCode]) {
                    renderCityList(popularCities[countryCode][lang], lang);
                    // Ëá™Âä®Â±ïÂºÄÂüéÂ∏ÇÂàóË°®
                    const cityList = document.getElementById('city-list');
                    const cityTitle = document.getElementById('city-title');
                    cityList.classList.add('show');
                    cityTitle.classList.add('active');
                } else {
                    showError(translations[lang].cityNotFound);
                }
            } catch (error) {
                console.error('Error loading cities:', error);
                showError(translations[lang].networkError);
            }
        }

        // Êõ¥Êñ∞Ê∏≤ÊüìÂüéÂ∏ÇÂàóË°®ÂáΩÊï∞
        function renderCityList(cities, lang) {
            const cityList = document.getElementById('city-list');
            if (!cityList) return;

            const itemsContainer = cityList.querySelector('.nav-items');
            if (!itemsContainer) return;

            // Ê∏ÖÈô§‰πãÂâçÁöÑ‰∫ã‰ª∂ÁõëÂê¨
            const newItemsContainer = itemsContainer.cloneNode(true);
            itemsContainer.parentNode.replaceChild(newItemsContainer, itemsContainer);
            
            newItemsContainer.innerHTML = cities
                .map(city => `
                    <div class="nav-item" data-lat="${city.latitude}" data-lon="${city.longitude}">
                        ${city.name}
                    </div>
                `).join('');
            
            // Ê∑ªÂä†ÂüéÂ∏ÇÈÄâÊã©‰∫ã‰ª∂ÁõëÂê¨
            newItemsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('nav-item')) {
                    selectCity(e.target.dataset.lat, e.target.dataset.lon, e.target.textContent, lang);
                }
            });
        }

        // Êõ¥Êñ∞ÈÄâÊã©ÂüéÂ∏ÇÂáΩÊï∞
        function selectCity(lat, lon, cityName, lang) {
            currentSelection[lang].city = { lat, lon, name: cityName };
            
            // Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÂÄº
            const cityTitle = document.getElementById('city-title');
            const selectedValue = cityTitle.querySelector('.selected-value') || document.createElement('div');
            selectedValue.className = 'selected-value';
            selectedValue.textContent = cityName;
            if (!cityTitle.querySelector('.selected-value')) {
                cityTitle.appendChild(selectedValue);
            }

            // ÈöêËóèÂüéÂ∏ÇÂàóË°®
            const cityList = document.getElementById('city-list');
            cityList.classList.remove('show');
            cityTitle.classList.remove('active');
            
            // ÁîüÊàêÊú™Êù•7Â§©ÁöÑÊó•ÊúüÂàóË°®
            const dates = generateDateList(lang);
            renderDateList(dates, lang);
            
            // Ëá™Âä®Â±ïÂºÄÊó•ÊúüÂàóË°®
            const dateList = document.getElementById('date-list');
            const dateTitle = document.getElementById('date-title');
            dateList.classList.add('show');
            dateTitle.classList.add('active');
            
            // Ëé∑ÂèñÂ§©Ê∞îÊï∞ÊçÆ
            getWeatherData(lat, lon, lang);
        }

        // ÂΩìÂâçÈÄâÊã©ÁöÑÊó•ÊúüÁä∂ÊÄÅ
        let currentDate = new Date();
        let selectedDate = new Date();

        // ÁîüÊàêÊó•ÊúüÂàóË°®Êîπ‰∏∫ÁîüÊàêÊó•ÂéÜ
        function generateDateList(lang) {
            const today = new Date();
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            
            // Ëé∑ÂèñËøô‰∏™ÊúàÁ¨¨‰∏ÄÂ§©ÊòØÊòüÊúüÂá†Ôºà0-6Ôºâ
            const firstDayOfWeek = firstDay.getDay();
            
            // ËÆ°ÁÆóÊó•ÂéÜÁΩëÊ†ºÈúÄË¶ÅÊòæÁ§∫ÁöÑÂ§©Êï∞ÔºàÂåÖÊã¨‰∏ä‰∏™ÊúàÁöÑÊúÄÂêéÂá†Â§©Ôºâ
            const totalDays = firstDayOfWeek + lastDay.getDate();
            const totalWeeks = Math.ceil(totalDays / 7);
            
            const weekDays = lang === 'zh' 
                ? ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠']
                : ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            const monthNames = lang === 'zh'
                ? ['‰∏ÄÊúà', '‰∫åÊúà', '‰∏âÊúà', 'ÂõõÊúà', '‰∫îÊúà', 'ÂÖ≠Êúà', '‰∏ÉÊúà', 'ÂÖ´Êúà', '‰πùÊúà', 'ÂçÅÊúà', 'ÂçÅ‰∏ÄÊúà', 'ÂçÅ‰∫åÊúà']
                : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

            return {
                weekDays,
                monthName: monthNames[currentDate.getMonth()],
                year: currentDate.getFullYear(),
                totalWeeks,
                firstDayOfWeek: firstDayOfWeek,
                lastDate: lastDay.getDate(),
                today: today,
                selectedDate: selectedDate
            };
        }

        // Ê∏≤ÊüìÊó•ÂéÜ
        function renderDateList(dates, lang) {
            const dateList = document.getElementById('date-list');
            if (!dateList) return;

            const calendarData = generateDateList(lang);
            
            let html = `
                <div class="calendar-wrapper">
                    <div class="calendar-header">
                        <div class="calendar-title">
                            ${calendarData.monthName} ${calendarData.year}
                        </div>
                        <div class="calendar-nav">
                            <button onclick="changeMonth(-1)">‚Äπ</button>
                            <button onclick="changeMonth(1)">‚Ä∫</button>
                        </div>
                    </div>
                    <div class="calendar-grid">
            `;

            // Ê∑ªÂä†ÊòüÊúüÊ†áÈ¢ò
            calendarData.weekDays.forEach(day => {
                html += `<div class="calendar-weekday">${day}</div>`;
            });

            // ËÆ°ÁÆóÊó•ÊúüËåÉÂõ¥ÔºàÊú™Êù•7Â§©Ôºâ
            const today = new Date();
            const maxSelectableDate = new Date();
            maxSelectableDate.setDate(today.getDate() + 6);

            let currentDay = 1;
            let currentWeek = 0;

            while (currentWeek < calendarData.totalWeeks) {
                for (let i = 0; i < 7; i++) {
                    if ((currentWeek === 0 && i < calendarData.firstDayOfWeek) || 
                        currentDay > calendarData.lastDate) {
                        html += '<div class="calendar-day disabled"></div>';
                    } else {
                        const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDay);
                        const isToday = date.toDateString() === today.toDateString();
                        const isSelected = date.toDateString() === selectedDate.toDateString();
                        const isInRange = date >= today && date <= maxSelectableDate;
                        const hasWeather = isInRange;

                        const classes = [
                            'calendar-day',
                            isToday ? 'today' : '',
                            isSelected ? 'active' : '',
                            hasWeather ? 'has-weather' : '',
                            !isInRange ? 'disabled' : ''
                        ].filter(Boolean).join(' ');

                        html += `
                            <div class="${classes}" 
                                 onclick="${isInRange ? `selectDate(${date.getDate() - today.getDate()}, '${formatDate(date.getTime() / 1000)}', '${lang}')` : ''}"
                            >${currentDay}</div>
                        `;
                        currentDay++;
                    }
                }
                currentWeek++;
            }

            html += '</div></div>';
            dateList.innerHTML = html;
        }

        // ÂàáÊç¢Êúà‰ªΩ
        function changeMonth(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            renderDateList(null, currentLang);
        }

        // ‰øÆÊîπÈÄâÊã©Êó•ÊúüÂáΩÊï∞
        function selectDate(dateIndex, dateText, lang) {
            // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÊó•Êúü
            selectedDate = new Date(Date.parse(dateText));
            
            // Êõ¥Êñ∞ÊòæÁ§∫
            renderDateList(null, lang);
            
            const { city } = currentSelection[lang];
            if (!city) return;
            
            // ‰ΩøÁî®Â∑≤ÊúâÁöÑÂ§©Ê∞îÊï∞ÊçÆÊõ¥Êñ∞ÊòæÁ§∫
            const weatherContainer = document.getElementById('weather-info');
            if (weatherContainer && weatherContainer._weatherData) {
                const weatherData = weatherContainer._weatherData;
                // Êõ¥Êñ∞Â§©Ê∞î‰ø°ÊÅØÂíåÁ©øÊê≠Âª∫ËÆÆ
                showWeatherInfo(weatherData, dateIndex, lang);
                generateOutfitRecommendations(weatherData, dateIndex, lang);
            } else {
                // Â¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÁöÑÂ§©Ê∞îÊï∞ÊçÆÔºåÈáçÊñ∞Ëé∑Âèñ
                getWeatherData(city.lat, city.lon, lang);
            }
        }

        // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
        function updateNavigation(lang) {
            const selection = currentSelection[lang];
            
            // Êõ¥Êñ∞ÈÄâ‰∏≠Áä∂ÊÄÅ
            const countryList = document.getElementById('country-list');
            const cityList = document.getElementById('city-list');
            const dateList = document.getElementById('date-list');

            if (countryList) {
                countryList.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.code === selection.country?.code);
                });
            }
            
            if (cityList) {
                cityList.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.toggle('active', item.textContent === selection.city?.name);
                });
            }
            
            if (dateList) {
                dateList.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.index === selection.date?.index?.toString());
                });
            }
        }

        // Ê∑ªÂä†ÁºìÂ≠òÁÆ°ÁêÜ
        const WeatherCache = {
            data: new Map(),
            maxAge: 15 * 60 * 1000, // 15ÂàÜÈíüÁºìÂ≠ò

            getKey(lat, lon) {
                return `${lat},${lon}`;
            },

            set(lat, lon, data) {
                const key = this.getKey(lat, lon);
                this.data.set(key, {
                    timestamp: Date.now(),
                    data: data
                });
            },

            get(lat, lon) {
                const key = this.getKey(lat, lon);
                const cached = this.data.get(key);
                
                if (!cached) return null;
                
                // Ê£ÄÊü•ÁºìÂ≠òÊòØÂê¶ËøáÊúü
                if (Date.now() - cached.timestamp > this.maxAge) {
                    this.data.delete(key);
                    return null;
                }
                
                return cached.data;
            },

            clear() {
                this.data.clear();
            }
        };

        // ‰ºòÂåñÊòæÁ§∫Â§©Ê∞î‰ø°ÊÅØÂáΩÊï∞
        function showWeatherInfo(weatherData, dateIndex, lang) {
            // ‰øùÂ≠òÂ§©Ê∞îÊï∞ÊçÆÂà∞ÂÆπÂô®‰∏≠
            const weatherContainer = document.getElementById('weather-info');
            if (weatherContainer) {
                weatherContainer._weatherData = weatherData;
            }

            // Êõ¥Êñ∞ÂΩìÂâçÂ§©Ê∞îÊòæÁ§∫
            updateCurrentWeather(weatherData, lang);
            
            // Ê∏≤ÊüìÂ§©Ê∞îÈ¢ÑÊä•Âç°Áâá
            renderForecastCards(weatherData, dateIndex, lang);
            
            // ÁîüÊàêÁ©øÊê≠Âª∫ËÆÆ
            generateOutfitRecommendations(weatherData, dateIndex, lang);
            
            // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
            updatePageTitle(weatherData, lang);
        }

        // ÂàÜÁ¶ªÂΩìÂâçÂ§©Ê∞îÊõ¥Êñ∞ÈÄªËæë
        function updateCurrentWeather(weatherData, lang) {
            const currentWeatherContainer = document.getElementById('current-weather');
            if (!currentWeatherContainer || !weatherData.current) return;

            const { temp, feels_like, humidity, wind_speed, weather_code, last_update } = weatherData.current;
            const weatherCondition = getWeatherCondition(weather_code);
            
            // Ê†ºÂºèÂåñÂ§©Ê∞îÊï∞ÊçÆÔºåÁ°Æ‰øùÊúâÈªòËÆ§ÂÄº
            const formattedTemp = temp !== undefined && temp !== null ? `${Math.round(temp)}¬∞C` : '--¬∞C';
            const formattedWeather = translations[lang].weather[weatherCondition] || '--';
            const formattedHumidity = humidity !== undefined && humidity !== null ? `${Math.round(humidity)}%` : '--%';
            const formattedWindSpeed = wind_speed !== undefined && wind_speed !== null ? `${Math.round(wind_speed)} m/s` : '-- m/s';
            const formattedLastUpdate = last_update || new Date().toLocaleTimeString(lang === 'zh' ? 'zh-CN' : 'en-US');
            
            currentWeatherContainer.innerHTML = `
                <div class="current-temp">${formattedTemp}</div>
                <div class="current-details">
                    ${formattedWeather}
                    <br>
                    ${translations[lang].humidity || 'ÊπøÂ∫¶'}: ${formattedHumidity}
                    <br>
                    ${translations[lang].windSpeed || 'È£éÈÄü'}: ${formattedWindSpeed}
                    <br>
                </div>
                <div class="last-update">
                    ${translations[lang].lastUpdate || 'ÊúÄÂêéÊõ¥Êñ∞'}: ${formattedLastUpdate}
            </div>
        `;
    }

        // ‰ºòÂåñÂ§©Ê∞îÈ¢ÑÊä•Âç°ÁâáÊ∏≤Êüì
        let currentCardIndex = 0;

        function renderForecastCards(weatherData, selectedIndex, lang) {
            const container = document.getElementById('forecast-container');
            if (!container || !weatherData || !weatherData.daily) return;

            // ÂàõÂª∫ÂØºËà™ÊåâÈíÆÂíåÊªöÂä®ÂÆπÂô®
            container.innerHTML = `
                <button class="nav-arrow prev" onclick="scrollForecast('prev')"></button>
                <button class="nav-arrow next" onclick="scrollForecast('next')"></button>
                <div class="forecast-scroll">
                    ${Array.from({ length: 7 }, (_, i) => {
                        const date = new Date();
                        date.setDate(date.getDate() + i);
                        
                        // Á°Æ‰øùÊï∞ÊçÆÂ≠òÂú®Âπ∂ËøõË°åÊï∞ÂÄºÊ£ÄÊü•
                        const dayTemp_max = weatherData.daily.temperature_2m_max[i] !== undefined ? Math.round(weatherData.daily.temperature_2m_max[i]) : '--';
                        const dayTemp_min = weatherData.daily.temperature_2m_min[i] !== undefined ? Math.round(weatherData.daily.temperature_2m_min[i]) : '--';
                        const dayWeather_code = weatherData.daily.weather_code[i] || 0;
                        const dayPrecip_prob = weatherData.daily.precipitation_probability_max[i] !== undefined ? Math.round(weatherData.daily.precipitation_probability_max[i]) : '--';
                        const dayWind_speed = weatherData.daily.wind_speed_10m_max[i] !== undefined ? Math.round(weatherData.daily.wind_speed_10m_max[i]) : '--';
                        
                        const isActive = i === selectedIndex;
                        
                        return `
                            <div class="forecast-card${isActive ? ' active' : ''}" 
                                onclick="selectDate(${i}, '${formatDate(date.getTime() / 1000)}', '${lang}')">
                                <div class="forecast-date">${formatDate(date.getTime() / 1000)}</div>
                                <div class="forecast-weather">
                                    ${getWeatherEmoji(getWeatherCondition(dayWeather_code))}
                                </div>
                                <div class="forecast-temp">
                                    ${Math.round(dayTemp_min)}¬∞ ~ ${Math.round(dayTemp_max)}¬∞
                                </div>
                                <div class="forecast-details">
                                    ${translations[lang].weather[getWeatherCondition(dayWeather_code)]}
                                    <br>
                                    üíß ${Math.round(dayPrecip_prob)}% | üí® ${Math.round(dayWind_speed)}m/s
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;

            // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÁä∂ÊÄÅ
            updateNavArrows();

            // Â¶ÇÊûúÈÄâ‰∏≠ÁöÑÊó•Êúü‰∏çÂú®ÂèØËßÅËåÉÂõ¥ÂÜÖÔºåÊªöÂä®Âà∞Áõ∏Â∫î‰ΩçÁΩÆ
            if (selectedIndex >= 4) {
                currentCardIndex = selectedIndex - 3;
                scrollToCurrentIndex();
            }
        }

        function scrollForecast(direction) {
            const maxIndex = 3; // ÂèØÊªöÂä®ÁöÑÊúÄÂ§ßÁ¥¢ÂºïÂÄºÔºåÁ°Æ‰øùÊúÄÂêé‰∏ÄÂº†Âç°ÁâáÂèØËßÅ
            
            if (direction === 'prev') {
                currentCardIndex = Math.max(0, currentCardIndex - 1);
            } else {
                currentCardIndex = Math.min(maxIndex, currentCardIndex + 1);
            }
            
            scrollToCurrentIndex();
            updateNavArrows();
        }

        function scrollToCurrentIndex() {
            const scrollContainer = document.querySelector('.forecast-scroll');
            if (scrollContainer) {
                const scrollPercentage = (currentCardIndex * 25); // ÊØèÊ¨°ÊªöÂä®25%
                scrollContainer.style.transform = `translateX(-${scrollPercentage}%)`;
            }
        }

        function updateNavArrows() {
            const prevButton = document.querySelector('.nav-arrow.prev');
            const nextButton = document.querySelector('.nav-arrow.next');
            
            if (prevButton) {
                prevButton.classList.toggle('disabled', currentCardIndex === 0);
            }
            
            if (nextButton) {
                nextButton.classList.toggle('disabled', currentCardIndex === 3);
            }
        }

        // ÂàÜÁ¶ªÈ°µÈù¢Ê†áÈ¢òÊõ¥Êñ∞ÈÄªËæë
        function updatePageTitle(weatherData, lang) {
            const cityName = currentSelection[lang].city.name;
            document.title = `${cityName} ${Math.round(weatherData.current.temp)}¬∞C | ${lang === 'zh' ? 'ÊóÖË°åÁ©øÊê≠Âä©Êâã' : 'Travel Outfit Advisor'}`;
        }

        // ÁîüÊàêÁ©øÊê≠Âª∫ËÆÆ
        function generateOutfit(temp, weather, lang) {
            const t = translations[lang].outfits;
            let outfit = '';

            // Âü∫‰∫éÊ∏©Â∫¶ÁöÑÂü∫Á°ÄÁ©øÊê≠Âª∫ËÆÆ
        if (temp < 10) {
                outfit = t.cold;
        } else if (temp < 20) {
                outfit = t.mild;
        } else {
                outfit = t.warm;
            }

            // Ê†πÊçÆÂ§©Ê∞îÁä∂ÂÜµÊ∑ªÂä†È¢ùÂ§ñÂª∫ËÆÆ
            if (weather === 'rain' || weather === 'drizzle' || weather === 'thunderstorm') {
                outfit += t.rainTip;
            } else if (weather === 'snow') {
                outfit += t.snowTip;
        }

        return outfit;
    }

        // ÁîüÊàêÁ©øÊê≠Âª∫ËÆÆ
        function generateOutfitRecommendations(weatherData, dateIndex, lang) {
            const container = document.getElementById('outfit-recommendations');
            if (!container || !weatherData || !weatherData.daily) return;

            // Ëé∑ÂèñÂ§©Ê∞îÊï∞ÊçÆ
            const temp = (weatherData.daily.temperature_2m_max[dateIndex] + weatherData.daily.temperature_2m_min[dateIndex]) / 2;
            const weather_code = weatherData.daily.weather_code[dateIndex];
            const weather = getWeatherCondition(weather_code);
            
            // ÁîüÊàê‰∏âÁßç‰∏çÂêå‰∫∫Áæ§ÁöÑÁ©øÊê≠Âª∫ËÆÆ
            const outfits = {
                women: generateOutfit(temp, weather, lang),
                men: generateOutfit(temp, weather, lang),
                kids: generateOutfit(temp, weather, lang)
            };

            // ‰ΩøÁî®Êñ∞ÁöÑÂ∏ÉÂ±ÄÁªìÊûÑÔºå‰ΩÜ‰øùÊåÅÂéüÊúâÁöÑÊï∞ÊçÆÁîüÊàêÈÄªËæë
            const html = `
                <div class="outfit-card">
                    <h3>${lang === 'zh' ? 'üë© Â•≥Â£´Á©øÊê≠' : 'üë© Women\'s Outfit'}</h3>
                    <div class="weather-icon">üå°Ô∏è ${temp.toFixed(1)}¬∞C</div>
                    <div class="outfit-content">${outfits.women}</div>
                </div>
                <div class="outfit-card">
                    <h3>${lang === 'zh' ? 'üë® Áî∑Â£´Á©øÊê≠' : 'üë® Men\'s Outfit'}</h3>
                    <div class="weather-icon">üå°Ô∏è ${temp.toFixed(1)}¬∞C</div>
                    <div class="outfit-content">${outfits.men}</div>
                </div>
                <div class="outfit-card">
                    <h3>${lang === 'zh' ? 'üë∂ ÂÑøÁ´•Á©øÊê≠' : 'üë∂ Kids\' Outfit'}</h3>
                    <div class="weather-icon">üå°Ô∏è ${temp.toFixed(1)}¬∞C</div>
                    <div class="outfit-content">${outfits.kids}</div>
                </div>
            `;

            container.innerHTML = html;
        }

        // Êõ¥Êñ∞Â§©Ê∞î‰ª£Á†ÅËΩ¨Êç¢ÂáΩÊï∞
        function getWeatherCondition(code) {
            // WMO Weather interpretation codes (WW)
            if (code === 0) return 'clear';
            if (code >= 1 && code <= 3) return 'clouds';
            if (code >= 45 && code <= 48) return 'fog';
            if (code >= 51 && code <= 55) return 'drizzle';
            if (code >= 56 && code <= 57) return 'drizzle';
            if (code >= 61 && code <= 65) return 'rain';
            if (code >= 66 && code <= 67) return 'rain';
            if (code >= 71 && code <= 77) return 'snow';
            if (code >= 80 && code <= 82) return 'rain';
            if (code >= 85 && code <= 86) return 'snow';
            if (code >= 95 && code <= 99) return 'thunderstorm';
            return 'clear';
        }

        // Ê∑ªÂä†ËØ≠Ë®ÄÂàáÊç¢ÂáΩÊï∞
        function toggleLanguageList() {
            const btn = document.querySelector('.language-btn');
            const list = document.getElementById('languageList');
            const isShow = list.classList.contains('show');
            
            // ÂàáÊç¢ÊåâÈíÆÂíåÂàóË°®ÁöÑÁä∂ÊÄÅ
            btn.classList.toggle('active');
            list.classList.toggle('show');

            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ÂàóË°®
            if (!isShow) {
                document.addEventListener('click', closeLanguageList);
            }
        }

        function closeLanguageList(e) {
            if (!e.target.closest('.language-switch')) {
                const btn = document.querySelector('.language-btn');
                const list = document.getElementById('languageList');
                btn.classList.remove('active');
                list.classList.remove('show');
                document.removeEventListener('click', closeLanguageList);
            }
        }

        function switchLanguage(lang) {
            const currentLangSpan = document.querySelector('.current-lang');
            const options = document.querySelectorAll('.language-option');
            const langNames = {
                'en': 'English',
                'zh': 'ÁÆÄ‰Ωì‰∏≠Êñá',
                'zh-TW': 'ÁπÅÈ´î‰∏≠Êñá',
                'ja': 'Êó•Êú¨Ë™û',
                'ko': 'ÌïúÍµ≠Ïñ¥',
                'de': 'Deutsch',
                'fr': 'Fran√ßais',
                'it': 'Italiano',
                'es': 'Espa√±ol',
                'pt': 'Portugu√™s',
                'hi': '‡§π‡§ø‡§Ç‡§¶‡•Ä'
            };

            // Êõ¥Êñ∞ÂΩìÂâçËØ≠Ë®ÄÊòæÁ§∫
            currentLangSpan.textContent = langNames[lang];

            // Êõ¥Êñ∞ÈÄâ‰∏≠Áä∂ÊÄÅ
            options.forEach(option => {
                option.classList.toggle('selected', option.textContent === langNames[lang]);
            });

            // ÂÖ≥Èó≠ËØ≠Ë®ÄÂàóË°®
            toggleLanguageList();

            // ‰øùÂ≠òËØ≠Ë®ÄËÆæÁΩÆÂπ∂Êõ¥Êñ∞ÁïåÈù¢
            localStorage.setItem('preferred_language', lang);
            currentLang = lang;
            
            // Êõ¥Êñ∞ÁïåÈù¢ÊñáÊú¨
            updateInterfaceText(lang);

            // Â¶ÇÊûúÂ∑≤ÁªèÈÄâÊã©‰∫ÜÂüéÂ∏ÇÔºåÈáçÊñ∞Ëé∑ÂèñÂ§©Ê∞îÊï∞ÊçÆ
            const currentCity = currentSelection[lang]?.city;
            if (currentCity) {
                getWeatherData(currentCity.lat, currentCity.lon, lang);
            }
        }

        function updateSelectedDateWeather(selectedDate) {
            const container = document.querySelector('.current-weather');
            if (!container || !weatherData) return;

            // Ëé∑ÂèñÈÄâ‰∏≠Êó•ÊúüÁöÑÁ¥¢Âºï
            const dateStr = selectedDate.toISOString().split('T')[0];
            const dailyIndex = weatherData.daily.time.findIndex(time => time === dateStr);
            
            if (dailyIndex === -1) return;

            // Ëé∑ÂèñËØ•Êó•ÊúüÁöÑÂ∞èÊó∂Êï∞ÊçÆËµ∑ÂßãÁ¥¢ÂºïÔºàÊØèÂ§©24Â∞èÊó∂Ôºâ
            const hourlyStartIndex = dailyIndex * 24;
            const currentHour = new Date().getHours();
            const hourlyIndex = hourlyStartIndex + currentHour;

            // Êõ¥Êñ∞Â§©Ê∞îÊï∞ÊçÆ
            const weatherInfo = {
                temp: Math.round((weatherData.daily.temperature_2m_max[dailyIndex] + weatherData.daily.temperature_2m_min[dailyIndex]) / 2),
                max_temp: Math.round(weatherData.daily.temperature_2m_max[dailyIndex]),
                min_temp: Math.round(weatherData.daily.temperature_2m_min[dailyIndex]),
                humidity: weatherData.hourly.relative_humidity_2m[hourlyIndex] ?? '--',
                wind_speed: weatherData.daily.wind_speed_10m_max[dailyIndex] ?? '--',
                weather_code: weatherData.daily.weather_code[dailyIndex],
                last_update: selectedDate.toLocaleDateString(lang === 'zh' ? 'zh-CN' : 'en-US')
            };

            // Êõ¥Êñ∞ DOM
            container.innerHTML = `
                <div class="temperature">${weatherInfo.temp}¬∞C</div>
                <div class="weather-condition">${getWeatherDescription(weatherInfo.weather_code, lang)}</div>
                <div class="weather-range">${weatherInfo.min_temp}¬∞ ~ ${weatherInfo.max_temp}¬∞</div>
                <div class="humidity">Humidity: ${weatherInfo.humidity}%</div>
                <div class="wind-speed">Wind Speed: ${weatherInfo.wind_speed} m/s</div>
                <div class="last-update">Date: ${weatherInfo.last_update}</div>
            `;
        }

        // ‰øÆÊîπÊó•ÊúüÁÇπÂáª‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞
        function handleDateClick(event) {
            const dateElement = event.target.closest('.date');
            if (!dateElement) return;

            // ÁßªÈô§‰πãÂâçÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.date.selected').forEach(el => el.classList.remove('selected'));
            
            // Ê∑ªÂä†Êñ∞ÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
            dateElement.classList.add('selected');
            
            // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÊó•Êúü
            const selectedDate = new Date(dateElement.dataset.date);
            
            // Êõ¥Êñ∞Â§©Ê∞îÊòæÁ§∫
            updateSelectedDateWeather(selectedDate);
            
            // Êõ¥Êñ∞Â§©Ê∞îÈ¢ÑÊä•Âç°Áâá
            renderForecastCards(selectedDate);
        }

        // ‰øÆÊîπÂàùÂßãÂåñÂáΩÊï∞
        async function initWeatherApp() {
            // ... existing code ...
            
            // ÂàùÂßãÂåñÊó∂‰ΩøÁî®ÂΩìÂâçÊó•Êúü
            const today = new Date();
            updateSelectedDateWeather(today);
            
            // Ê∑ªÂä†Êó•ÊúüÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨
            const dateContainer = document.querySelector('.date-list');
            if (dateContainer) {
                dateContainer.addEventListener('click', handleDateClick);
            }
            
            // ... existing code ...
        }

        // ‰ΩøÁî® MutationObserver Êõø‰ª£Â∫üÂºÉÁöÑ DOM ‰∫ã‰ª∂
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    mutation.addedNodes.forEach(node => {
                        if (node.nodeType === 1) { // ÂÖÉÁ¥†ËäÇÁÇπ
                            initializeNewElements(node);
                        }
                    });
                }
            });
        });

        // ÂàùÂßãÂåñÊñ∞Ê∑ªÂä†ÁöÑÂÖÉÁ¥†
        function initializeNewElements(element) {
            // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑÊó•ÊúüÂÖÉÁ¥†Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨
            const dateElements = element.querySelectorAll('.date');
            dateElements.forEach(dateEl => {
                if (!dateEl.dataset.initialized) {
                    dateEl.dataset.initialized = 'true';
                    dateEl.addEventListener('click', handleDateClick);
                }
            });

            // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑÂ§©Ê∞îÂç°ÁâáÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨
            const forecastCards = element.querySelectorAll('.forecast-card');
            forecastCards.forEach(card => {
                if (!card.dataset.initialized) {
                    card.dataset.initialized = 'true';
                    card.addEventListener('click', handleForecastCardClick);
                }
            });
        }

        // Âú®È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂêØÂä®ËßÇÂØüÂô®
        document.addEventListener('DOMContentLoaded', () => {
            // ÈÖçÁΩÆËßÇÂØüÂô®
            const config = {
                childList: true,
                subtree: true
            };

            // ÂºÄÂßãËßÇÂØüÊñáÊ°£ÂèòÂåñ
            observer.observe(document.body, config);

            // ÂàùÂßãÂåñÁé∞ÊúâÂÖÉÁ¥†
            initializeNewElements(document.body);
        });

        // Êõ¥Êñ∞Ê†áÈ¢òÊñáÊú¨
        document.addEventListener('DOMContentLoaded', function() {
            // ... existing code ...
            
            // Êõ¥Êñ∞‰∏≠ÊñáÊ†áÈ¢ò
            const translations = {
                zh: {
                    title: 'ÊúÄÂ•ΩÁöÑÂ§©Ê∞îÁ©øË°£ÊåáÂçó',
                    // ... other translations ...
                },
                en: {
                    title: 'Best Weather Dress Guide',
                    // ... other translations ...
                }
            };
            
            // ... rest of the code ...
        });

        // Ê∑ªÂä†ÁÆÄÂçïÁöÑÊªöÂä®Âä®ÁîªJavaScript
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.querySelector('.testimonials-container');
            let isDown = false;
            let startX;
            let scrollLeft;

            container.addEventListener('mousedown', (e) => {
                isDown = true;
                container.style.cursor = 'grabbing';
                startX = e.pageX - container.offsetLeft;
                scrollLeft = container.scrollLeft;
            });

            container.addEventListener('mouseleave', () => {
                isDown = false;
                container.style.cursor = 'grab';
            });

            container.addEventListener('mouseup', () => {
                isDown = false;
                container.style.cursor = 'grab';
            });

            container.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - container.offsetLeft;
                const walk = (x - startX) * 2;
                container.scrollLeft = scrollLeft - walk;
            });
        });
    </script>
</body>
</html>
 e2c9aa40afba0c52a546b9926df4f2efd1b2c263
